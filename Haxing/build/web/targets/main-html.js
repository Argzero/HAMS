/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function o(a,b){function d(){}d.prototype=a;var c=new d,e;for(e in b)c[e]=b[e];b.toString!==Object.prototype.toString&&(c.toString=b.toString);return c}function zb(a){return a instanceof Array?function(){return u.iter(a)}:"function"==typeof a.iterator?ka(a,a.iterator):a.iterator}function ka(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Mb++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var T=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};T.__name__=!0;T.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:T};
var u=function(){};u.__name__=!0;u.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};u.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};u.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;a.splice(d,1);return!0};u.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ca=function(){};Ca.__name__=
!0;Ca.array=function(a){for(var b=[],a=zb(a)();a.hasNext();){var d=a.next();b.push(d)}return b};Ca.count=function(a,b){var d=0;if(null==b)for(var c=zb(a)();c.hasNext();)c.next(),d++;else for(c=zb(a)();c.hasNext();){var e=c.next();b(e)&&d++}return d};var Ab=function(){};Ab.__name__=!0;Math.__name__=!0;var la=function(){};la.__name__=!0;la.field=function(a,b){try{return a[b]}catch(d){return null}};var z=function(){};z.__name__=!0;z.is=function(a,b){return C.__instanceof(a,b)};z.instance=function(a,
b){return a instanceof b?a:null};z.string=function(a){return C.__string_rec(a,"")};z["int"]=function(a){return a|0};z.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==u.cca(a,1)||88==u.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var bb=function(){};bb.__name__=!0;bb.startsWith=function(a,b){return a.length>=b.length&&u.substr(a,0,b.length)==b};var Q=function(){};Q.__name__=!0;Q.prototype={__class__:Q};var q=function(){this._flags=0;this.owner=this.next=null};q.__name__=!0;q.__interfaces__=
[Q];q.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:q};var M=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};M.__name__=!0;M.__interfaces__=[Q];M.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=
a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var c=d.next;if(d==a)return null==b?this.firstComponent=c:(b.owner=this,b.next=c),delete this._compMap[d.get_name()],0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=c}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);
a.parent=this;if(b){for(var d=null,c=this.firstChild;null!=c;)d=c,c=c.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var c=d.next;if(d==a){null==b?this.firstChild=c:b.next=c;d.parent=null;d.next=null;break}b=d;d=c}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},__class__:M};var Bb=function(){};Bb.__name__=!0;var cb=function(){};cb.__name__=!0;cb.prototype={__class__:cb};var U=function(){};U.__name__=!0;U.__interfaces__=[cb];U.prototype={init:function(){var a=this;k.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new $(b);this._pointer=new y;this._mouse=new Da(this._pointer,
b);this._renderer=this.createRenderer(b);this.mainLoop=new aa;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var c=0,e=function(d){if(!(1E3>d.timeStamp-c)){var e=b.getBoundingClientRect(),f=a.getX(d,e),e=a.getY(d,e);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,e,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,
e);break;case "mouseup":a._mouse.submitUp(f,e,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,
e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||e){var j=new Ea(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=j;e=function(b){var d;d=f?b.changedTouches:[b];var e=b.target.getBoundingClientRect();c=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();k.SHOULD_HIDE_MOBILE_BROWSER&&k.hideMobileBrowser();for(b=0;b<d.length;){var p=d[b];++b;var h=a.getX(p,e),i=a.getY(p,e);j.submitDown((f?p.identifier:
p.pointerId)|0,h,i)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<d.length;)p=d[b],++b,h=a.getX(p,e),i=a.getY(p,e),j.submitMove((f?p.identifier:p.pointerId)|0,h,i);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)p=d[b],++b,h=a.getX(p,e),i=a.getY(p,e),j.submitUp((f?p.identifier:p.pointerId)|0,h,i)}};f?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",
e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Fa;var p=window.onerror;window.onerror=function(a,b,d){i.uncaughtError.emit(a);return null!=p?p(a,b,d):!1};var h=k.loadExtension("hidden",window.document);null!=h.value?(e=function(){i.hidden.set__(la.field(window.document,h.field))},e(null),window.document.addEventListener(h.prefix+"visibilitychange",e,!1)):(e=
function(a){i.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));i.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var Cb=k.loadExtension("requestAnimationFrame").value;if(null!=Cb){var l=window.performance,n=null!=l&&k.polyfill("now",l);n?this._lastUpdate=l.now():null;var m=null,m=function(d){a.update(n?l.now():d);Cb(m,b)};Cb(m,b)}else window.setInterval(function(){a.update(Date.now())},
16);ma.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new l(this,a)).promise},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;i.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new K;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&
b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Db.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=
b)if(k.detectSlowDriver(b))null;else return new Ga(this._stage,b)}catch(d){}return new ba(a)},__class__:U};var A=function(a,b){this._value=a;this._changed=null!=b?new na(b):null};A.__name__=!0;A.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},get__:function(){return this._value},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new na);
return this._changed},__class__:A};var ca=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};ca.__name__=!0;ca.__interfaces__=[Q];ca.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:ca};var v=function(a){this._head=null!=a?new ca(this,a):null;this._deferredTasks=null};v.__name__=!0;v.prototype={connectImpl:function(a,b){var d=this,c=new ca(this,a);this._head==
v.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(c,b)}):this.listAdd(c,b);return c},disconnect:function(a){var b=this;this._head==v.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new db(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=v.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=
null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,c=this._head;null!=c;)d=c,c=c._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}},__class__:v};var na=function(a){v.call(this,a)};na.__name__=!0;na.__super__=v;na.prototype=o(v.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,
b){var d=this;this._head==v.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var d=this.willEmit(),c=d;null!=c;)c._listener(a,b),c.stayInList||c.dispose(),c=c._next;this.didEmit(d)},__class__:na});var r=function(a){v.call(this,a)};r.__name__=!0;r.__super__=v;r.prototype=o(v.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==v.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):
this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),d=d._next;this.didEmit(b)},__class__:r});var s=function(a,b){this._behavior=null;A.call(this,a,b)};s.__name__=!0;s.__super__=A;s.prototype=o(A.prototype,{set__:function(a){this._behavior=null;return A.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(A.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,
b,d){this.set_behavior(new oa(this._value,a,b,d))},animateBy:function(a,b,d){this.set_behavior(new oa(this._value,this._value+a,b,d))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:s});var i=function(){};i.__name__=!0;i.init=function(){i._calledInit||(i._platform.init(),i._calledInit=!0)};var ma=function(){};ma.__name__=!0;ma.info=function(){null};ma.__super__=Bb;ma.prototype=o(Bb.prototype,{__class__:ma});var eb=function(){this._realDt=0};eb.__name__=!0;eb.__super__=
q;eb.prototype=o(q.prototype,{get_name:function(){return"SpeedAdjuster_3"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:eb});var Ha=function(){};Ha.__name__=!0;Ha.prototype={__class__:Ha};var Eb=function(){};Eb.__name__=!0;Eb.linear=function(a){return a};var oa=function(a,b,d,c){this._from=a;this._to=b;this._duration=d;this.elapsed=0;this._easing=null!=c?c:Eb.linear};oa.__name__=!0;oa.__interfaces__=[Ha];oa.prototype={update:function(a){this.elapsed+=
a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:oa};var W=function(){};W.__name__=!0;W.__interfaces__=[Q];W.prototype={__class__:W};var h={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};h.WEBP.__enum__=h;h.JXR=["JXR",1];h.JXR.__enum__=h;h.PNG=["PNG",2];h.PNG.__enum__=h;h.JPG=["JPG",3];h.JPG.__enum__=
h;h.GIF=["GIF",4];h.GIF.__enum__=h;h.DDS=["DDS",5];h.DDS.__enum__=h;h.PVR=["PVR",6];h.PVR.__enum__=h;h.PKM=["PKM",7];h.PKM.__enum__=h;h.MP3=["MP3",8];h.MP3.__enum__=h;h.M4A=["M4A",9];h.M4A.__enum__=h;h.OPUS=["OPUS",10];h.OPUS.__enum__=h;h.OGG=["OGG",11];h.OGG.__enum__=h;h.WAV=["WAV",12];h.WAV.__enum__=h;h.Data=["Data",13];h.Data.__enum__=h;var fb=function(a,b,d,c){this.name=a;this.url=b;this.format=d;this.bytes=c};fb.__name__=!0;fb.prototype={__class__:fb};var Ia=function(){};Ia.__name__=!0;Ia.__interfaces__=
[Q];Ia.prototype={__class__:Ia};var Ja=function(){};Ja.__name__=!0;Ja.__interfaces__=[W];Ja.prototype={__class__:Ja};var I=function(){this._localBase=this._remoteBase=null;this._entries=[]};I.__name__=!0;I.fromAssets=function(a,b){null==b&&(b=!0);var d=la.field(Fb.getType(I).assets[0],a);if(null==d){if(b)throw B.withFields("Missing asset pack",["name",a]);return null}var c=new I;c.set_localBase("assets");for(var e=0;e<d.length;){var f=d[e];++e;var j=f.name,p=a+"/"+j+"?v="+z.string(f.md5),i=I.inferFormat(j);
i!=h.Data&&(j=B.removeFileExtension(j));c.add(j,p,f.bytes,i)}return c};I.inferFormat=function(a){a=B.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return h.GIF;case "jpg":case "jpeg":return h.JPG;case "jxr":case "wdp":return h.JXR;case "png":return h.PNG;case "webp":return h.WEBP;case "dds":return h.DDS;case "pvr":return h.PVR;case "pkm":return h.PKM;case "m4a":return h.M4A;case "mp3":return h.MP3;case "ogg":return h.OGG;case "opus":return h.OPUS;case "wav":return h.WAV}else null;
return h.Data};I.prototype={add:function(a,b,d,c){null==d&&(d=0);null==c&&(c=I.inferFormat(b));a=new fb(a,b,c,d);this._entries.push(a);return a},iterator:function(){return u.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&I._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?B.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Gb.that(!bb.startsWith(a,"http://")&&!bb.startsWith(a,
"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:I};var Ka=function(){q.call(this);this.reset()};Ka.__name__=!0;Ka.__super__=q;Ka.prototype=o(q.prototype,{get_name:function(){return"FpsDisplay_2"},onUpdate:function(a){++this._fpsFrames;this._fpsTime+=a;if(1<this._fpsTime){var a="FPS: "+(100*(this._fpsFrames/this._fpsTime)|0)/100,b=z.instance(this.owner._compMap.Sprite_0,
pa);null!=b?b.set_text(a):null;this.reset()}},reset:function(){this._fpsTime=this._fpsFrames=0},__class__:Ka});var w={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),Normal:["Normal",0]};w.Normal.__enum__=w;w.Add=["Add",1];w.Add.__enum__=w;w.Multiply=["Multiply",2];w.Multiply.__enum__=w;w.Screen=["Screen",3];w.Screen.__enum__=w;w.Mask=["Mask",4];w.Mask.__enum__=w;w.Copy=["Copy",5];w.Copy.__enum__=w;var gb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};
gb.__name__=!0;gb.prototype={__class__:gb};var n=function(){this.blendMode=this.scissor=null;var a=this;q.call(this);this._flags|=54;this._localMatrix=new N;var b=function(){a._flags|=24};this.x=new s(0,b);this.y=new s(0,b);this.rotation=new s(0,b);this.scaleX=new s(1,b);this.scaleY=new s(1,b);this.anchorX=new s(0,b);this.anchorY=new s(0,b);this.alpha=new s(1)};n.__name__=!0;n.hitTest=function(a,b,d){var c=a._compMap.Sprite_0;if(null!=c){if(6!=(c._flags&6))return null;c.getLocalMatrix().inverseTransform(b,
d,n._scratchPoint)&&(b=n._scratchPoint.x,d=n._scratchPoint.y);var e=c.scissor;if(null!=e&&!e.contains(b,d))return null}a=n.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=c&&c.containsLocal(b,d)?c:null};n.render=function(a,b){var d=a._compMap.Sprite_0;if(null!=d){var c=d.alpha._value;if(0==(d._flags&2)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=d.blendMode&&b.setBlendMode(d.blendMode);var c=d.getLocalMatrix(),e=c.m02,f=c.m12;0!=(d._flags&32)&&(e=Math.round(e),f=Math.round(f));b.transform(c.m00,
c.m10,c.m01,c.m11,e,f);c=d.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);d.draw(b)}c=a._compMap.Director_1;if(null!=c){c=c.occludedScenes;for(e=0;e<c.length;)f=c[e],++e,n.render(f,b)}for(c=a.firstChild;null!=c;)e=c.next,n.render(c,b),c=e;null!=d&&b.restore()};n.hitTestBackwards=function(a,b,d){if(null!=a){var c=n.hitTestBackwards(a.next,b,d);return null!=c?c:n.hitTest(a,b,d)}return null};n.__super__=q;n.prototype=o(q.prototype,{get_name:function(){return"Sprite_0"},getNaturalWidth:function(){return 0},
getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},onAdded:function(){0!=
(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_0;if(null!=b)return b;
a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=i._platform.getPointer().move.connect(function(b){for(var d=b.hit;null!=d;){if(d==a)return;d=d.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&
this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:n});var da=function(a,
b,d){n.call(this);this.color=a;this.width=new s(b);this.height=new s(d)};da.__name__=!0;da.__super__=n;da.prototype=o(n.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){n.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:da});var La=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=
0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};La.__name__=!0;La.prototype={draw:function(a,b,d){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,d+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?z["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new O);this._kernings.set(a,b)},__class__:La};var ea=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");
this.reload()};ea.__name__=!0;ea.prototype={layoutText:function(a,b,d,c,e){null==e&&(e=0);null==c&&(c=0);null==d&&(d=0);null==b&&(b=R.Left);return new X(this,a,b,d,c,e)},reload:function(){this._glyphs=new O;this._glyphs.set(ea.NEWLINE.charCode,ea.NEWLINE);for(var a=new fa(this._file.toString()),b=new O,d=this.name.lastIndexOf("/"),d=0<=d?u.substr(this.name,0,d+1):"",c=a.keywords();c.hasNext();)switch(c.next()){case "info":for(var e=a.pairs();e.hasNext();){var f=e.next();switch(f.key){case "size":this.size=
f.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(f=e.next(),f.key){case "lineHeight":this.lineHeight=f.getInt()}break;case "page":for(var e=0,f=null,j=a.pairs();j.hasNext();){var p=j.next();switch(p.key){case "id":e=p.getInt();break;case "file":f=p.getString()}}f=this._pack.getTexture(d+B.removeFileExtension(f));b.set(e,f);break;case "char":e=null;for(f=a.pairs();f.hasNext();)switch(j=f.next(),j.key){case "id":e=new La(j.getInt());break;case "x":e.x=j.getInt();break;case "y":e.y=
j.getInt();break;case "width":e.width=j.getInt();break;case "height":e.height=j.getInt();break;case "page":j=j.getInt();e.page=b.get(j);break;case "xoffset":e.xOffset=j.getInt();break;case "yoffset":e.yOffset=j.getInt();break;case "xadvance":e.xAdvance=j.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;j=f=0;for(p=a.pairs();p.hasNext();){var h=p.next();switch(h.key){case "first":e=this._glyphs.get(h.getInt());break;case "second":f=h.getInt();break;case "amount":j=h.getInt()}}null!=
e&&0!=j&&e.setKerning(f,j)}},__class__:ea};var R={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};R.Left.__enum__=R;R.Center=["Center",1];R.Center.__enum__=R;R.Right=["Right",2];R.Right.__enum__=R;var X=function(a,b,d,c,e,f){this.lines=0;var j=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+f);this.bounds=new qa;for(var p=[],f=b.length,h=0;h<f;){var i=h++,i=b.charCodeAt(i),i=a._glyphs.get(i);null!=i?this._glyphs.push(i):null}for(var b=
-1,k=0,l=0,a=a._glyphs.get(10),f=function(){j.bounds.width=E.max(j.bounds.width,k);j.bounds.height+=l;p[j.lines]=k;l=k=0;++j.lines},h=0;h<this._glyphs.length;){i=this._glyphs[h];this._offsets[h]=Math.round(k);var m=0<c&&k+i.width>c;m||i==a?(m&&(0<=b?(this._glyphs[b]=a,k=this._offsets[b],h=b):this._glyphs.splice(h,0,a)),b=-1,l=this._lineOffset,f()):(32==i.charCode&&(b=h),k+=i.xAdvance+e,l=E.max(l,i.height+i.yOffset),h+1<this._glyphs.length&&(k+=i.getKerning(this._glyphs[h+1].charCode)));++h}f();e=
0;a=X.getAlignOffset(d,p[0],c);b=1.79769313486231E308;f=-1.79769313486231E308;i=h=0;for(m=this._glyphs.length;i<m;){var n=this._glyphs[i];10==n.charCode&&(e+=this._lineOffset,++h,a=X.getAlignOffset(d,p[h],c));this._offsets[i]+=a;var o=e+n.yOffset;b<o||(b=o);f=E.max(f,o+n.height);++i}this.bounds.x=X.getAlignOffset(d,this.bounds.width,c);this.bounds.y=b;this.bounds.height=f-b};X.__name__=!0;X.getAlignOffset=function(a,b,d){switch(a[1]){case 0:return 0;case 2:return d-b;case 1:return Math.round((d-b)/
2)}};X.prototype={draw:function(a){for(var b=0,d=0,c=this._glyphs.length;d<c;){var e=this._glyphs[d];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[d],b);++d}},__class__:X};var fa=function(a){this._configText=a;this._keywordPattern=new T("([A-Za-z]+)(.*)","");this._pairPattern=new T('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};fa.__name__=!0;fa.advance=function(a,b){var d=b.matchedPos();return u.substr(a,d.pos+d.len,a.length)};fa.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=
fa.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=fa.advance(b,a._pairPattern);return new hb(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:fa};var hb=function(a,b){this.key=a;this._value=b};hb.__name__=!0;hb.prototype={getInt:function(){return z.parseInt(this._value)},
getString:function(){return 34!=this._value.charCodeAt(0)?null:u.substr(this._value,1,this._value.length-2)},__class__:hb};var ib=function(){};ib.__name__=!0;ib.prototype={__class__:ib};var ra=function(a){n.call(this);this.texture=a};ra.__name__=!0;ra.__super__=n;ra.prototype=o(n.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():
0},__class__:ra});var ga={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};ga.Portrait.__enum__=ga;ga.Landscape=["Landscape",1];ga.Landscape.__enum__=ga;var Ma=function(){};Ma.__name__=!0;Ma.__interfaces__=[W];Ma.prototype={__class__:Ma};var Hb=function(){};Hb.__name__=!0;Hb.__interfaces__=[Ma];var pa=function(a,b){null==b&&(b="");this._layout=null;var d=this;n.call(this);this._font=a;this._text=b;this._align=R.Left;this._flags|=128;var c=function(){d._flags|=128};this.wrapWidth=
new s(0,c);this.letterSpacing=new s(0,c);this.lineSpacing=new s(0,c)};pa.__name__=!0;pa.__super__=n;pa.prototype=o(n.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,
b){this.updateLayout();return this._layout.bounds.contains(a,b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){n.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:pa});var c={__ename__:!0,
__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(","),
A:["A",0]};c.A.__enum__=c;c.B=["B",1];c.B.__enum__=c;c.C=["C",2];c.C.__enum__=c;c.D=["D",3];c.D.__enum__=c;c.E=["E",4];c.E.__enum__=c;c.F=["F",5];c.F.__enum__=c;c.G=["G",6];c.G.__enum__=c;c.H=["H",7];c.H.__enum__=c;c.I=["I",8];c.I.__enum__=c;c.J=["J",9];c.J.__enum__=c;c.K=["K",10];c.K.__enum__=c;c.L=["L",11];c.L.__enum__=c;c.M=["M",12];c.M.__enum__=c;c.N=["N",13];c.N.__enum__=c;c.O=["O",14];c.O.__enum__=c;c.P=["P",15];c.P.__enum__=c;c.Q=["Q",16];c.Q.__enum__=c;c.R=["R",17];c.R.__enum__=c;c.S=["S",
18];c.S.__enum__=c;c.T=["T",19];c.T.__enum__=c;c.U=["U",20];c.U.__enum__=c;c.V=["V",21];c.V.__enum__=c;c.W=["W",22];c.W.__enum__=c;c.X=["X",23];c.X.__enum__=c;c.Y=["Y",24];c.Y.__enum__=c;c.Z=["Z",25];c.Z.__enum__=c;c.Number0=["Number0",26];c.Number0.__enum__=c;c.Number1=["Number1",27];c.Number1.__enum__=c;c.Number2=["Number2",28];c.Number2.__enum__=c;c.Number3=["Number3",29];c.Number3.__enum__=c;c.Number4=["Number4",30];c.Number4.__enum__=c;c.Number5=["Number5",31];c.Number5.__enum__=c;c.Number6=
["Number6",32];c.Number6.__enum__=c;c.Number7=["Number7",33];c.Number7.__enum__=c;c.Number8=["Number8",34];c.Number8.__enum__=c;c.Number9=["Number9",35];c.Number9.__enum__=c;c.Numpad0=["Numpad0",36];c.Numpad0.__enum__=c;c.Numpad1=["Numpad1",37];c.Numpad1.__enum__=c;c.Numpad2=["Numpad2",38];c.Numpad2.__enum__=c;c.Numpad3=["Numpad3",39];c.Numpad3.__enum__=c;c.Numpad4=["Numpad4",40];c.Numpad4.__enum__=c;c.Numpad5=["Numpad5",41];c.Numpad5.__enum__=c;c.Numpad6=["Numpad6",42];c.Numpad6.__enum__=c;c.Numpad7=
["Numpad7",43];c.Numpad7.__enum__=c;c.Numpad8=["Numpad8",44];c.Numpad8.__enum__=c;c.Numpad9=["Numpad9",45];c.Numpad9.__enum__=c;c.NumpadAdd=["NumpadAdd",46];c.NumpadAdd.__enum__=c;c.NumpadDecimal=["NumpadDecimal",47];c.NumpadDecimal.__enum__=c;c.NumpadDivide=["NumpadDivide",48];c.NumpadDivide.__enum__=c;c.NumpadEnter=["NumpadEnter",49];c.NumpadEnter.__enum__=c;c.NumpadMultiply=["NumpadMultiply",50];c.NumpadMultiply.__enum__=c;c.NumpadSubtract=["NumpadSubtract",51];c.NumpadSubtract.__enum__=c;c.F1=
["F1",52];c.F1.__enum__=c;c.F2=["F2",53];c.F2.__enum__=c;c.F3=["F3",54];c.F3.__enum__=c;c.F4=["F4",55];c.F4.__enum__=c;c.F5=["F5",56];c.F5.__enum__=c;c.F6=["F6",57];c.F6.__enum__=c;c.F7=["F7",58];c.F7.__enum__=c;c.F8=["F8",59];c.F8.__enum__=c;c.F9=["F9",60];c.F9.__enum__=c;c.F10=["F10",61];c.F10.__enum__=c;c.F11=["F11",62];c.F11.__enum__=c;c.F12=["F12",63];c.F12.__enum__=c;c.F13=["F13",64];c.F13.__enum__=c;c.F14=["F14",65];c.F14.__enum__=c;c.F15=["F15",66];c.F15.__enum__=c;c.Left=["Left",67];c.Left.__enum__=
c;c.Up=["Up",68];c.Up.__enum__=c;c.Right=["Right",69];c.Right.__enum__=c;c.Down=["Down",70];c.Down.__enum__=c;c.Alt=["Alt",71];c.Alt.__enum__=c;c.Backquote=["Backquote",72];c.Backquote.__enum__=c;c.Backslash=["Backslash",73];c.Backslash.__enum__=c;c.Backspace=["Backspace",74];c.Backspace.__enum__=c;c.CapsLock=["CapsLock",75];c.CapsLock.__enum__=c;c.Comma=["Comma",76];c.Comma.__enum__=c;c.Command=["Command",77];c.Command.__enum__=c;c.Control=["Control",78];c.Control.__enum__=c;c.Delete=["Delete",79];
c.Delete.__enum__=c;c.End=["End",80];c.End.__enum__=c;c.Enter=["Enter",81];c.Enter.__enum__=c;c.Equals=["Equals",82];c.Equals.__enum__=c;c.Escape=["Escape",83];c.Escape.__enum__=c;c.Home=["Home",84];c.Home.__enum__=c;c.Insert=["Insert",85];c.Insert.__enum__=c;c.LeftBracket=["LeftBracket",86];c.LeftBracket.__enum__=c;c.Minus=["Minus",87];c.Minus.__enum__=c;c.PageDown=["PageDown",88];c.PageDown.__enum__=c;c.PageUp=["PageUp",89];c.PageUp.__enum__=c;c.Period=["Period",90];c.Period.__enum__=c;c.Quote=
["Quote",91];c.Quote.__enum__=c;c.RightBracket=["RightBracket",92];c.RightBracket.__enum__=c;c.Semicolon=["Semicolon",93];c.Semicolon.__enum__=c;c.Shift=["Shift",94];c.Shift.__enum__=c;c.Slash=["Slash",95];c.Slash.__enum__=c;c.Space=["Space",96];c.Space.__enum__=c;c.Tab=["Tab",97];c.Tab.__enum__=c;c.Menu=["Menu",98];c.Menu.__enum__=c;c.Search=["Search",99];c.Search.__enum__=c;c.Unknown=function(a){a=["Unknown",100,a];a.__enum__=c;return a};var jb=function(){this.init(0,null)};jb.__name__=!0;jb.prototype=
{init:function(a,b){this.id=a;this.key=b},__class__:jb};var F={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};F.Left.__enum__=F;F.Middle=["Middle",1];F.Middle.__enum__=F;F.Right=["Right",2];F.Right.__enum__=F;F.Unknown=function(a){a=["Unknown",3,a];a.__enum__=F;return a};var V={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};V.Default.__enum__=V;V.Button=["Button",1];V.Button.__enum__=V;V.None=["None",2];V.None.__enum__=V;var kb=function(){this.init(0,
0,0,null)};kb.__name__=!0;kb.prototype={init:function(a,b,d,c){this.id=a;this.viewX=b;this.viewY=d;this.button=c},__class__:kb};var sa={__ename__:!0,__constructs__:["Mouse","Touch"]};sa.Mouse=function(a){a=["Mouse",0,a];a.__enum__=sa;return a};sa.Touch=function(a){a=["Touch",1,a];a.__enum__=sa;return a};var lb=function(){this.init(0,0,0,null,null)};lb.__name__=!0;lb.prototype={init:function(a,b,d,c,e){this.id=a;this.viewX=b;this.viewY=d;this.hit=c;this.source=e;this._stopped=!1},__class__:lb};var mb=
function(a){this.id=a;this._source=sa.Touch(this)};mb.__name__=!0;mb.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:mb};var E=function(){};E.__name__=!0;E.max=function(a,b){return a>b?a:b};E.min=function(a,b){return a<b?a:b};E.sign=function(a){return 0>a?-1:0<a?1:0};var N=function(){this.identity()};N.__name__=!0;N.multiply=function(a,b,d){null==d&&(d=new N);var c=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=c;d.m01=e;d.m02=f;c=a.m10*
b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;d.m10=c;d.m11=e;d.m12=f;return d};N.prototype={set:function(a,b,d,c,e,f){this.m00=a;this.m01=d;this.m02=e;this.m10=b;this.m11=c;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,c,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*d,f*d,-f*c,e*c,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/
a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,b,d){for(var c=0;c<b;){var e=a[c],f=a[c+1];d[c++]=e*this.m00+f*this.m01+this.m02;d[c++]=e*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,d){var c=this.determinant();if(0==c)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/c;d.y=(b*this.m00-a*this.m10)/c;
return!0},clone:function(a){null==a&&(a=new N);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:N};var qa=function(a,b,d,c){null==c&&(c=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,c)};qa.__name__=!0;qa.prototype={set:function(a,b,d,c){this.x=a;this.y=b;this.width=d;this.height=c},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<
b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new qa);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:qa};var x=function(){this._disposed=!1};x.__name__=!0;x.__interfaces__=[W];x.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:x};var Y=function(a,b){var d=this;this.manifest=b;this._platform=a;
this.promise=new Na;this._bytesLoaded=new G;this._pack=new Oa(b,this);var c=Ca.array(b);if(0==c.length)this.handleSuccess();else{for(var e=new G,f=0;f<c.length;){var j=c[f];++f;var h=e.get(j.name);null==h&&(h=[],e.set(j.name,h));h.push(j)}this._assetsRemaining=Ca.count(e);for(c=e.iterator();c.hasNext();)e=[c.next()],this.pickBestEntry(e[0],function(a){return function(c){if(null!=c){var e=b.getFullURL(c);try{d.loadEntry(e,c)}catch(f){d.handleError(c,"Unexpected error: "+z.string(f))}e=d.promise;e.set_total(e._total+
c.bytes)}else c=a[0][0],Y.isAudio(c.format)?d.handleLoad(c,J.getInstance()):d.handleError(c,"Could not find a supported format to load")}}(e))}};Y.__name__=!0;Y.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};Y.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var g=0;g<c.length;){var e=c[g];++g;for(var f=0;f<a.length;){var j=a[f];++f;if(j.format==e){b(j);return}}}b(null)})},loadEntry:function(){null},
getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,g=this._bytesLoaded.iterator();g.hasNext();)var e=
g.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(B.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:Y};var Oa=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new G;this.sounds=new G;this.files=new G};Oa.__name__=!0;Oa.__interfaces__=[Ia];Oa.prototype={getTexture:function(a,
b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw B.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw B.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw B.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();
this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:Oa};var ta=function(a){this._disposed=!1;this._content=a};ta.__name__=!0;ta.__interfaces__=[Ja];ta.__super__=x;ta.prototype=o(x.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:ta});var nb=function(){};nb.__name__=!0;nb.prototype={__class__:nb};
var K=function(){this.down=new r;this.up=new r;this.backButton=new ha;this._keyStates=new O};K.__name__=!0;K.__interfaces__=[nb];K.prototype={isDown:function(a){return this.isCodeDown(ua.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),K._sharedEvent.init(K._sharedEvent.id+1,ua.toKey(a)),this.down.emit(K._sharedEvent));
return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),K._sharedEvent.init(K._sharedEvent.id+1,ua.toKey(a)),this.up.emit(K._sharedEvent))},__class__:K};var Jb=function(){};Jb.__name__=!0;var H=function(a){this._pointer=a;this._source=sa.Mouse(H._sharedEvent);this.down=new r;this.move=new r;this.up=new r;this.scroll=new r;this._y=this._x=0;this._cursor=V.Default;this._buttonStates=new O};H.__name__=!0;H.__interfaces__=[Jb];H.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||
(this._buttonStates.set(c,!0),this.prepare(a,b,ob.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(H._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(H._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,ob.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(H._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;
if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;H._sharedEvent.init(H._sharedEvent.id+1,a,b,c)},__class__:H};var pb=function(){};pb.__name__=!0;pb.prototype={__class__:pb};var y=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new r;this.move=new r;this.up=new r;this._x=a;this._y=b;this._isDown=c};y.__name__=!0;y.__interfaces__=[pb];y.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,
b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var g=[],e=n.hitTest(i.root,a,b);if(null!=e){var f=e.owner;do{var j=f._compMap.Sprite_0;null!=j&&g.push(j);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<g.length;)if(b=g[a],++a,b.onPointerDown(y._sharedEvent),y._sharedEvent._stopped)return;this.down.emit(y._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var g=[],e=n.hitTest(i.root,a,b);if(null!=e){var f=e.owner;do{var j=f._compMap.Sprite_0;null!=j&&
g.push(j);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<g.length;)if(b=g[a],++a,b.onPointerMove(y._sharedEvent),y._sharedEvent._stopped)return;this.move.emit(y._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var g=[],e=n.hitTest(i.root,a,b);if(null!=e){var f=e.owner;do{var j=f._compMap.Sprite_0;null!=j&&g.push(j);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<g.length;)if(b=g[a],++a,b.onPointerUp(y._sharedEvent),y._sharedEvent._stopped)return;
this.up.emit(y._sharedEvent)}},prepare:function(a,b,c,g){this._x=a;this._y=b;y._sharedEvent.init(y._sharedEvent.id+1,a,b,c,g)},__class__:y};var P=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};P.__name__=!0;P.__interfaces__=[Hb];P.__super__=x;P.prototype=o(x.prototype,{subTexture:function(a,b,c,g){c=this.root.createTexture(c,g);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},split:function(a,
b){null==b&&(b=1);for(var c=[],g=this._width/a|0,e=this._height/b|0,f=0;f<b;)for(var j=f++,h=0;h<a;){var i=h++;c.push(this.subTexture(i*g,j*e,g,e))}return c},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:P});var Ib=function(){};Ib.__name__=!0;var Ea=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new O;this._points=[];this.down=new r;this.move=new r;this.up=
new r};Ea.__name__=!0;Ea.__interfaces__=[Ib];Ea.prototype={submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var g=new mb(a);g.init(b,c);this._pointMap.set(a,g);this._points.push(g);null==this._pointerTouch&&(this._pointerTouch=g,this._pointer.submitDown(b,c,g._source));this.down.emit(g)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var g=this._pointMap.get(a);
null!=g&&(g.init(b,c),this._pointMap.remove(a),u.remove(this._points,g),this._pointerTouch==g&&(this._pointerTouch=null,this._pointer.submitUp(b,c,g._source)),this.up.emit(g))},__class__:Ea};var ia=function(){};ia.__name__=!0;ia.__interfaces__=[W];ia.prototype={__class__:ia};var J=function(){this._disposed=!1;this._playback=new Pa(this)};J.__name__=!0;J.__interfaces__=[ia];J.getInstance=function(){null==J._instance&&(J._instance=new J);return J._instance};J.__super__=x;J.prototype=o(x.prototype,{play:function(){return this._playback},
loop:function(){return this._playback},onDisposed:function(){},__class__:J});var ja=function(){};ja.__name__=!0;ja.__interfaces__=[Q];ja.prototype={__class__:ja};var Pa=function(a){this._sound=a;this.volume=new s(0);this._complete=new A(!0)};Pa.__name__=!0;Pa.__interfaces__=[ja];Pa.prototype={get_complete:function(){return this._complete},get_position:function(){return 0},dispose:function(){},__class__:Pa};var Fa=function(){this.down=new r;this.move=new r;this.up=new r};Fa.__name__=!0;Fa.__interfaces__=
[Ib];Fa.prototype={__class__:Fa};var va=function(){this._entries=[]};va.__name__=!0;va.__interfaces__=[Q];va.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new qb(a,b,c))},addDisposingListener:function(a,b,c){var g=this;this.addListener(a,b,function(a){g.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:va};var qb=function(a,b,c){this.dispatcher=
a;this.type=b;this.listener=c};qb.__name__=!0;qb.prototype={__class__:qb};var wa=function(){};wa.__name__=!0;wa.__interfaces__=[ib];wa.prototype={__class__:wa};var rb=function(){};rb.__name__=!0;rb.prototype={__class__:rb};var xa=function(){};xa.__name__=!0;xa.__interfaces__=[rb];xa.prototype={__class__:xa};var ua=function(){};ua.__name__=!0;ua.toKey=function(a){switch(a){case 65:return c.A;case 66:return c.B;case 67:return c.C;case 68:return c.D;case 69:return c.E;case 70:return c.F;case 71:return c.G;
case 72:return c.H;case 73:return c.I;case 74:return c.J;case 75:return c.K;case 76:return c.L;case 77:return c.M;case 78:return c.N;case 79:return c.O;case 80:return c.P;case 81:return c.Q;case 82:return c.R;case 83:return c.S;case 84:return c.T;case 85:return c.U;case 86:return c.V;case 87:return c.W;case 88:return c.X;case 89:return c.Y;case 90:return c.Z;case 48:return c.Number0;case 49:return c.Number1;case 50:return c.Number2;case 51:return c.Number3;case 52:return c.Number4;case 53:return c.Number5;
case 54:return c.Number6;case 55:return c.Number7;case 56:return c.Number8;case 57:return c.Number9;case 96:return c.Numpad0;case 97:return c.Numpad1;case 98:return c.Numpad2;case 99:return c.Numpad3;case 100:return c.Numpad4;case 101:return c.Numpad5;case 102:return c.Numpad6;case 103:return c.Numpad7;case 104:return c.Numpad8;case 105:return c.Numpad9;case 107:return c.NumpadAdd;case 110:return c.NumpadDecimal;case 111:return c.NumpadDivide;case 108:return c.NumpadEnter;case 106:return c.NumpadMultiply;
case 109:return c.NumpadSubtract;case 112:return c.F1;case 113:return c.F2;case 114:return c.F3;case 115:return c.F4;case 116:return c.F5;case 117:return c.F6;case 118:return c.F7;case 119:return c.F8;case 120:return c.F9;case 121:return c.F10;case 122:return c.F11;case 123:return c.F12;case 37:return c.Left;case 38:return c.Up;case 39:return c.Right;case 40:return c.Down;case 18:return c.Alt;case 192:return c.Backquote;case 220:return c.Backslash;case 8:return c.Backspace;case 20:return c.CapsLock;
case 188:return c.Comma;case 15:return c.Command;case 17:return c.Control;case 46:return c.Delete;case 35:return c.End;case 13:return c.Enter;case 187:return c.Equals;case 27:return c.Escape;case 36:return c.Home;case 45:return c.Insert;case 219:return c.LeftBracket;case 189:return c.Minus;case 34:return c.PageDown;case 33:return c.PageUp;case 190:return c.Period;case 222:return c.Quote;case 221:return c.RightBracket;case 186:return c.Semicolon;case 16:return c.Shift;case 191:return c.Slash;case 32:return c.Space;
case 9:return c.Tab;case 16777234:return c.Menu;case 16777247:return c.Search}return c.Unknown(a)};ua.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;
case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;
case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;
case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var aa=function(){this._tickables=
[]};aa.__name__=!0;aa.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_3;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var g=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=g}for(c=a.firstChild;null!=c;)g=c.next,aa.updateEntity(c,b),c=g};aa.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}i.volume.update(a);
aa.updateEntity(i.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),n.render(i.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:aa};var sb=function(){};sb.__name__=!0;sb.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var ob=function(){};ob.__name__=!0;ob.toButton=function(a){switch(a){case 0:return F.Left;case 1:return F.Middle;case 2:return F.Right}return F.Unknown(a)};var Qa=function(){};Qa.__name__=!0;Qa.prototype={__class__:Qa};
var Ra=function(){};Ra.__name__=!0;Ra.prototype={__class__:Ra};var Sa=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};Sa.__name__=!0;Sa.__interfaces__=[wa];Sa.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,g,e,f){this._canvasCtx.transform(a,b,c,g,e,f)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,g,e,f,j){this._firstDraw?
(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,g,e,f,j),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+g|0,a.rootY+e|0,f|0,j|0,b|0,c|0,f|0,j|0)},fillRect:function(a,b,c,g,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,g,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+z.string(a);
this._canvasCtx.fillStyle="#"+z.string(a);this._canvasCtx.fillRect(b|0,c|0,g|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,g){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,g|0);this._canvasCtx.clip()},
willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:Sa};var ba=function(a){this.graphics=new Sa(a,!1);this._hasGPU=new A(!0)};ba.__name__=!0;ba.__interfaces__=[xa];ba.prototype={get_type:function(){return S.Canvas},createTextureFromImage:function(a){a=new ya(ba.CANVAS_TEXTURES?k.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},
didRender:function(){this.graphics.didRender()},__class__:ba};var Ta=function(a,b,c){P.call(this,a,b,c)};Ta.__name__=!0;Ta.__super__=P;Ta.prototype=o(P.prototype,{__class__:Ta});var ya=function(a){this._graphics=null;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};ya.__name__=!0;ya.__interfaces__=[Qa];ya.__super__=x;ya.prototype=o(x.prototype,{createTexture:function(a,b){return new Ta(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:ya});var l=function(a,
b){Y.call(this,a,b)};l.__name__=!0;l.detectImageFormats=function(a){var b=[h.PNG,h.JPG,h.GIF],c=2,g;g=window.document.createElement("img");g.onload=g.onerror=function(){1==g.width&&b.unshift(h.WEBP);--c;0==c&&a(b)};g.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(h.JXR);--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
l.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==ka(a,a.canPlayType))return[];var b=new T("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!m.get_supported()&&b.match(c))return[];for(var b=[{format:h.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:h.MP3,mimeType:"audio/mpeg"},{format:h.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:h.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:h.WAV,mimeType:"audio/wav"}],c=[],
g=0;g<b.length;){var e=b[g];++g;var f="";try{f=a.canPlayType(e.mimeType)}catch(j){}""!=f&&c.push(e.format)}return c};l.supportsBlob=function(){if(l._detectBlobSupport){l._detectBlobSupport=!1;if((new T("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;l._URL=k.loadExtension("URL").value}return null!=l._URL&&null!=l._URL.createObjectURL};
l.__super__=Y;l.prototype=o(Y.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var g;g=window.document.createElement("img");var e=new va;e.addDisposingListener(g,"load",function(){l.supportsBlob()&&l._URL.revokeObjectURL(g.src);var a=c._platform.getRenderer().createTextureFromImage(g);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(g,"error",function(){c.handleError(b,"Failed to load image")});l.supportsBlob()?this.download(a,
b,"blob",function(a){g.src=l._URL.createObjectURL(a)}):g.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(m.get_supported())this.download(a,b,"arraybuffer",function(a){m.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new m(a))},function(){c.handleLoad(b,J.getInstance())})});else{var f;f=window.document.createElement("audio");
f.preload="auto";var j=++l._mediaRefCount;null==l._mediaElements&&(l._mediaElements=new O);l._mediaElements.set(j,f);e=new va;e.addDisposingListener(f,"canplaythrough",function(){l._mediaElements.remove(j);c.handleLoad(b,new za(f))});e.addDisposingListener(f,"error",function(){l._mediaElements.remove(j);var a=f.error.code;3==a||4==a?c.handleLoad(b,J.getInstance()):c.handleError(b,"Failed to load audio: "+f.error.code)});e.addListener(f,"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=
f.buffered.end(0)/f.duration;c.handleProgress(b,a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new ta(a))})}},getAssetFormats:function(a){var b=this;null==l._supportedFormats&&(l._supportedFormats=new Na,l.detectImageFormats(function(a){l._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(l.detectAudioFormats()).concat([h.Data]))}));l._supportedFormats.get(a)},download:function(a,b,c,g){var e=this,
f=null,j=null,h=0,i=!1,k=function(){i&&(i=!1,window.clearInterval(h))},l=3,m=function(){--l;return 0<=l?(j(),!0):!1},j=function(){k();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=c;var j=0;f.onprogress=function(a){i||(i=!0,h=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-j&&!m()&&(k(),e.handleError(b,"Download stalled"))},1E3));j=Date.now();e.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=f.status||!m())k(),e.handleError(b,"HTTP error "+f.status)};
f.onload=function(){var a=f.response;null==a&&(a=f.responseText);k();g(a)};f.send()};j()},__class__:l});var Da=function(a,b){H.call(this,a);this._canvas=b};Da.__name__=!0;Da.__super__=H;Da.prototype=o(H.prototype,{__class__:Da});var za=function(a){this._disposed=!1;this.audioElement=a};za.__name__=!0;za.__interfaces__=[ia];za.__super__=x;za.prototype=o(x.prototype,{play:function(a){null==a&&(a=1);return new Aa(this,a,!1)},loop:function(a){null==a&&(a=1);return new Aa(this,a,!0)},onDisposed:function(){this.audioElement=
null},__class__:za});var Aa=function(a,b,c){var g=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new s(b,function(){g.updateVolume()});this.updateVolume();this._complete=new A(!1);this.playAudio();i.hidden._value&&this.set_paused(!0)};Aa.__name__=!0;Aa.__interfaces__=[Ra,ja];Aa.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():
this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._clonedElement.currentTime},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||
(U.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=i.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=i.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=i.volume._value*this.volume._value},__class__:Aa};var tb=function(){};tb.__name__=!0;tb.prototype={__class__:tb};var $=function(a){var b=this;this._canvas=a;
this.resize=new ha;this.scaleFactor=$.computeScaleFactor();1!=this.scaleFactor&&(k.setVendorStyle(this._canvas,"transform-origin","top left"),k.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));k.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){k.callLater(ka(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",ka(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new A(null);null!=
window.orientation&&(window.addEventListener("orientationchange",ka(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new A(!1);k.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};$.__name__=!0;$.__interfaces__=[tb];$.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=k.loadExtension("backingStorePixelRatio",b).value;
null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};$.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,g=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==g)return!1;this._canvas.width=c|0;this._canvas.height=g|0;
this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";k.callLater(function(){k.hideMobileBrowser();k.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(k.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==k.loadFirstExtension(["fullscreen",
"fullScreen","isFullScreen"],window.document).value)},__class__:$};var k=function(){};k.__name__=!0;k.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};k.hideMobileBrowser=function(){window.scrollTo(1,0)};k.loadExtension=function(a,b){null==b&&(b=window);var c=la.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+u.substr(a,1,null),g=0,e=k.VENDOR_PREFIXES;g<e.length;){var f=e[g];++g;var j=f+c,h=la.field(b,j);if(null!=h)return{prefix:f,field:j,
value:h}}return{prefix:null,field:null,value:null}};k.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var g=a[c];++c;g=k.loadExtension(g,b);if(null!=g.field)return g}return{prefix:null,field:null,value:null}};k.polyfill=function(a,b){null==b&&(b=window);var c=k.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};k.setVendorStyle=function(a,b,c){for(var a=a.style,g=0,e=k.VENDOR_PREFIXES;g<e.length;){var f=e[g];++g;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};k.addVendorListener=
function(a,b,c,g){for(var e=0,f=k.VENDOR_PREFIXES;e<f.length;){var j=f[e];++e;a.addEventListener(j+b,c,g)}a.addEventListener(b,c,g)};k.orientation=function(a){switch(a){case -90:case 90:return ga.Landscape;default:return ga.Portrait}};k.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};k.createCanvas=function(a){var b=k.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);
c.restore();return b};k.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};k.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var m=function(a){this._disposed=!1;
this.buffer=a};m.__name__=!0;m.__interfaces__=[ia];m.get_supported=function(){if(m._detectSupport){m._detectSupport=!1;var a=k.loadExtension("AudioContext").value;null!=a&&(m.ctx=new a,m.gain=m.createGain(),m.gain.connect(m.ctx.destination),i.volume.watch(function(a){m.gain.gain.value=a}))}return null!=m.ctx};m.createGain=function(){return null!=m.ctx.createGain?m.ctx.createGain():m.ctx.createGainNode()};m.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};m.__super__=x;m.prototype=o(x.prototype,
{play:function(a){null==a&&(a=1);return new Ba(this,a,!1)},loop:function(a){null==a&&(a=1);return new Ba(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:m});var Ba=function(a,b,c){var g=this;this._sound=a;this._head=m.gain;this._complete=new A(!1);this._sourceNode=m.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){g._complete.set__(!0)};m.start(this._sourceNode,0);
this.playAudio();this.volume=new s(b,function(a){g.setVolume(a)});1!=b&&this.setVolume(b);i.hidden._value&&this.set_paused(!0)};Ba.__name__=!0;Ba.__interfaces__=[Ra,ja];Ba.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(m.ctx.currentTime-
this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=m.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),
this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=m.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(U.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=i.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Ba};var ub=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=
this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Ua(a);
this._drawPatternShader=new Va(a);this._fillRectShader=new Wa(a);this.resize(16)};ub.__name__=!0;ub.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=
this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,c,g){g!=this._lastTexture&&(this.flush(),this._lastTexture=g);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,g,
e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=g||null!=this._lastScissor)if(null==g||null==this._lastScissor||!this._lastScissor.equals(g))this.flush(),this._lastScissor=null!=g?g.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},
flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&
(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==
this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var g=
c++;b[6*g]=4*g;b[6*g+1]=4*g+1;b[6*g+2]=4*g+2;b[6*g+3]=4*g+2;b[6*g+4]=4*g+3;b[6*g+5]=4*g}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:ub};var L=function(a,b){this._inverseProjection=this._stateList=null;null==L._scratchQuadArray&&
(L._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};L.__name__=!0;L.__interfaces__=[wa];L.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Xa,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,c,g,e,f){var j=this._stateList;L._scratchMatrix.set(a,b,c,g,e,f);N.multiply(j.matrix,L._scratchMatrix,j.matrix)},
restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,g,e,f,j){var h=this._stateList,i=a.root,b=this.transformQuad(b,c,f,j),c=i.width,i=i.height,g=(a.rootX+g)/c,e=(a.rootY+e)/i,f=g+f/c,j=e+j/i,c=h.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=g;h[++a]=e;h[++a]=c;h[++a]=b[2];h[++a]=b[3];h[++a]=
f;h[++a]=e;h[++a]=c;h[++a]=b[4];h[++a]=b[5];h[++a]=f;h[++a]=j;h[++a]=c;h[++a]=b[6];h[++a]=b[7];h[++a]=g;h[++a]=j;h[++a]=c},fillRect:function(a,b,c,g,e){var f=this._stateList,b=this.transformQuad(b,c,g,e),c=(a&16711680)/16711680,g=(a&65280)/65280,a=(a&255)/255,e=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,f.scissor),h=this._batcher.data;h[f]=b[0];h[++f]=b[1];h[++f]=c;h[++f]=g;h[++f]=a;h[++f]=e;h[++f]=b[2];h[++f]=b[3];h[++f]=c;h[++f]=g;h[++f]=a;h[++f]=e;h[++f]=b[4];h[++f]=
b[5];h[++f]=c;h[++f]=g;h[++f]=a;h[++f]=e;h[++f]=b[6];h[++f]=b[7];h[++f]=c;h[++f]=g;h[++f]=a;h[++f]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,g){var e=this._stateList,f=L._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+c;f[3]=b+g;e.matrix.transformArray(f,4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];b=f[1];c=f[2]-a;g=f[3]-b;0>c&&(a+=c,c=-c);0>g&&(b+=g,g=-g);e.applyScissor(a,b,c,g)},willRender:function(){this._batcher.willRender()},
didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new Xa;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new N;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,g){var c=a+c,g=b+g,e=L._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=g;e[6]=a;e[7]=g;this._stateList.matrix.transformArray(e,8,e);return e},__class__:L};var Xa=function(){this.scissor=
this.prev=this.next=null;this.matrix=new N;this.alpha=1;this.blendMode=w.Normal};Xa.__name__=!0;Xa.prototype={applyScissor:function(a,b,c,g){if(null!=this.scissor)var e=E.max(this.scissor.x,a),f=E.max(this.scissor.y,b),c=E.min(this.scissor.x+this.scissor.width,a+c),g=E.min(this.scissor.y+this.scissor.height,b+g),a=e,b=f,c=c-e,g=g-f;else this.scissor=new qa;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(g))},__class__:Xa};var Ga=function(a,b){var c=this;this._hasGPU=new A(!0);
this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(ka(this,this.onResize));this.init()};Ga.__name__=!0;Ga.__interfaces__=[xa];Ga.prototype={get_type:function(){return S.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new Z(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,
a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new ub(this.gl);this.graphics=new L(this.batcher,null);this.onResize()},__class__:Ga};var Ya=function(a,b,c){P.call(this,
a,b,c)};Ya.__name__=!0;Ya.__super__=P;Ya.prototype=o(P.prototype,{__class__:Ya});var Z=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=E.max(2,sb.nextPowerOfTwo(b));this.height=E.max(2,sb.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};Z.__name__=!0;Z.__interfaces__=
[Qa];Z.drawBorder=function(a,b,c){var g=a.getContext("2d");g.drawImage(a,b-1,0,1,c,b,0,1,c);g.drawImage(a,0,c-1,b,1,0,c,b,1)};Z.__super__=x;Z.prototype=o(x.prototype,{createTexture:function(a,b){return new Ya(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=k.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);Z.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,
0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:Z});var D=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,D.createShader(a,35633,b));a.attachShader(this._program,D.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};
D.__name__=!0;D.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};D.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:D};var Va=function(a){D.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};Va.__name__=!0;
Va.__super__=D;Va.prototype=o(D.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,g){this._gl.uniform4f(this.u_region,a,b,c,g)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},
__class__:Va});var Ua=function(a){D.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};Ua.__name__=!0;Ua.__super__=D;Ua.prototype=o(D.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,
2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Ua});var Wa=function(a){D.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");
this.a_alpha=this.getAttribLocation("a_alpha")};Wa.__name__=!0;Wa.__super__=D;Wa.prototype=o(D.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:Wa});var vb=function(){this._transitor=null};vb.__name__=
!0;vb.__super__=q;vb.prototype=o(q.prototype,{get_name:function(){return"Director_1"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=
a._compMap.Scene_4;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_4;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:vb});var wb=function(){};wb.__name__=!0;wb.__super__=
q;wb.prototype=o(q.prototype,{get_name:function(){return"Scene_4"},__class__:wb});var S={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};S.Stage3D.__enum__=S;S.WebGL=["WebGL",1];S.WebGL.__enum__=S;S.Canvas=["Canvas",2];S.Canvas.__enum__=S;var Gb=function(){};Gb.__name__=!0;Gb.that=function(){};var Na=function(){this.success=new r;this.error=new r;this.progressChanged=new ha;this.hasResult=!1;this._total=this._progress=0};Na.__name__=!0;Na.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";
this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Na};var ha=function(a){v.call(this,a)};ha.__name__=!0;ha.__super__=v;ha.prototype=o(v.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,
b)},emit:function(){var a=this;this._head==v.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ha});var db=function(a){this.next=null;this.fn=a};db.__name__=!0;db.prototype={__class__:db};var B=function(){};B.__name__=!0;B.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,b+1,null):null};B.removeFileExtension=function(a){var b=
a.lastIndexOf(".");return 0<b?u.substr(a,0,b):a};B.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=u.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=u.substr(a,b+1,null));return B.getFileExtension(a)};B.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};B.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",g=0;g<c;){0<g&&(a+=", ");var e=b[g],f=b[g+1];if(z.is(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=e+"="+z.string(f);g+=2}a+=
"]"}return a};var O=function(){this.h={}};O.__name__=!0;O.__interfaces__=[Ab];O.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:O};var G=function(){this.h={}};G.__name__=!0;G.__interfaces__=[Ab];G.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&
a.push(b.substr(1));return u.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:G};var Fb=function(){};Fb.__name__=!0;Fb.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var xb=function(a,b,c,g){null==g&&(g=!1);null==c&&(c=!1);this.last_position=-1;this.looping=this.playing=!1;this.lerp_amt=0.1;this.volume=0;this.sound=b;this.name=a;this.type="SOUND";t.debug&&
null;c?this.current_playback=this.sound.play():g&&(this.current_playback=this.sound.loop())};xb.__name__=!0;xb.prototype={update:function(){null!=this.current_playback?(t.debug&&null,this.current_playback.volume.animateTo(this.volume,this.lerp_amt),this.current_playback.get_complete().get__()&&(this.current_playback=null),this.current_playback.get_position()<this.last_position&&this.looping&&t.debug&&null,this.last_position=this.current_playback.get_position(),t.debug&&null):this.looping=this.playing=
!1},Loop:function(a){null==a&&(a=1);null==this.current_playback&&(this.volume=a,this.current_playback=this.sound.loop())},__class__:xb};var t=function(a,b){q.call(this);this.files_by_label=b;null==this.files_by_label&&(this.files_by_label=new G);this.assets=a;this.audio_by_label=new G;this.load_files(a);t.debug&&null};t.__name__=!0;t.GetInstance=function(){if(null==t.Instance)throw"Instance not initialized with Asset Pack. Unable to load content. Please initialize in the Main#OnSuccess Method";return t.Instance};
t.CreateInstance=function(a,b){if(null==t.Instance&&null!=a&&null!=b)return t.Instance=new t(a,b),t.Instance;if(null!=t.Instance)throw"Only one instance of AudioManager may exist at a time!";if(null==a)throw"Assets not given to AudioManager; Unable to load audio assets.";throw"No expected files passed to AudioManager.\nUnable to Initialize.\nIf you want to initialize without having initial files,\nplease pass in an empty array";};t.__super__=q;t.prototype=o(q.prototype,{get_name:function(){return"AudioManager_6"},
onUpdate:function(){for(var a=this.audio_by_label.keys();a.hasNext();)this.audio_by_label.get(a.next()).update();for(a=this.SongManagers.keys();a.hasNext();)this.SongManagers.get(a.next()).update()},load_files:function(a){for(var b=this.files_by_label.keys();b.hasNext();){var c=b.next();t.debug&&null;var g=this.files_by_label.get(c),g=a.getSound(g);this.audio_by_label.set(c,new xb(c,g,!1,null,0))}this.files_by_label=new G},Loop:function(a,b){null==b&&(b=1);this.audio_by_label.get(a).Loop(b)},__class__:t});
var Za=function(){};Za.__name__=!0;Za.main=function(){i.init();var a=new da(2105376,i._platform.getStage().get_width(),i._platform.getStage().get_height());i.root.addChild((new M).add(a));a=I.fromAssets("global");i._platform.loadAssetPack(a).get(Za.onSuccess);i.root.addChild((new M).add(new da(2707565,i._platform.getStage().get_width(),i._platform.getStage().get_height())))};Za.onSuccess=function(a){var b=new da(2105376,i._platform.getStage().get_width(),i._platform.getStage().get_height());i.root.addChild((new M).add(b));
b=new ea(a,"Arial");b=(new M).add(new pa(b,"0"));b.add(new Ka);i.root.addChild(b);b=a.getTexture("Hero").split(8,3);b=(new M).add((new ra(b[0])).setXY(i._platform.getStage().get_width()/2,i._platform.getStage().get_height()/2)).add(new $a({walkingBack:b.slice(0,4),walkingFront:b.slice(4,8),walkingLeft:b.slice(8,12),walkingRight:b.slice(12,16),attackingLeft:b.slice(16,18),attackingRight:b.slice(18,20),attackingBack:b.slice(20,22),attackingFront:b.slice(22,24)}));i.root.addChild(b);var c=new G,c=new G;
c.set("bgm","deep_leaves/deep_leaves");b._compMap.Player_5.audio=t.CreateInstance(a,c);a=(new M).add(t.GetInstance());i.root.addChild(a);a._compMap.AudioManager_6.Loop("bgm",0.7);null};var $a=function(a){this.vX=this.vY=0;this.SLOW_DOWN_SPEED=0.95;var b=this;q.call(this);this._spriteStates=a;this._currentIndex=0;this._currentStateArray=a.walkingFront;this._spriteChangeTimer=new s(0,function(a,c){a<c&&(++b._currentIndex,b._currentIndex%=b._currentStateArray.length)});this._spriteChangeTimer.set_behavior(new ab(this._spriteChangeTimer))};
$a.__name__=!0;$a.__super__=q;$a.prototype=o(q.prototype,{get_name:function(){return"Player_5"},onUpdate:function(a){var b=z.instance(this.owner._compMap.Sprite_0,ra);b.texture=this._currentStateArray[this._currentIndex];this._spriteChangeTimer.update(a);i._platform.getPointer().get_x();i._platform.getPointer().get_y();a=0.5+0.2*b.y._value/i._platform.getStage().get_height();this.vY*=this.SLOW_DOWN_SPEED;this.vX*=this.SLOW_DOWN_SPEED;var d=!1;i._platform.getKeyboard().isDown(c.Up)&&(d=!0,this.vY+=
-1);i._platform.getKeyboard().isDown(c.Down)&&(d=!0,this.vY+=1);i._platform.getKeyboard().isDown(c.Left)&&(d=!0,this.vX+=-1);i._platform.getKeyboard().isDown(c.Right)&&(d=!0,this.vX+=1);b.x.animateBy(this.vX,0.05);b.y.animateBy(this.vY,0.05);d&&this.setAnimationSprites();b.x._value+b.getNaturalWidth()>i._platform.getStage().get_width()-3?(b.x.animateTo(i._platform.getStage().get_width()-5-b.getNaturalWidth(),0.01),this.vX=0):3>b.x._value?(b.x.animateTo(5,0.01),this.vX=0):b.y._value+b.getNaturalHeight()>
i._platform.getStage().get_height()-3?(b.y.animateTo(i._platform.getStage().get_height()-5-b.getNaturalHeight(),0.01),this.vY=0):3>b.y._value&&(b.y.animateTo(5,0.01),this.vY=0);b.scaleY.animateTo(2*a*E.sign(b.scaleX._value),0.1)},setAnimationSprites:function(){1<Math.abs(this.vX)&&Math.abs(this.vX)>Math.abs(this.vY)?this._currentStateArray=0<this.vX?this._spriteStates.walkingRight:this._spriteStates.walkingLeft:0<this.vY?this._currentStateArray=this._spriteStates.walkingFront:0>this.vY&&(this._currentStateArray=
this._spriteStates.walkingBack)},__class__:$a});var yb=function(){};yb.__name__=!0;yb.__super__=q;yb.prototype=o(q.prototype,{get_name:function(){return"SongManager_7"},update:function(){},__class__:yb});var ab=function(a){this._spriteChangeTimer=a};ab.__name__=!0;ab.__interfaces__=[Ha];ab.prototype={update:function(a){a=this._spriteChangeTimer._value+a;return 0.5<a?a-0.5:a},isComplete:function(){return!1},__class__:ab};var C=function(){};C.__name__=!0;C.getClass=function(a){return a instanceof Array&&
null==a.__enum__?Array:a.__class__};C.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",g=2,e=a.length;g<e;)var f=g++,c=2!=f?c+(","+C.__string_rec(a[f],b)):c+C.__string_rec(a[f],b);return c+")"}c=a.length;g="[";b+="\t";for(e=0;e<c;)f=e++,g+=(0<f?",":"")+C.__string_rec(a[f],b);return g+
"]"}try{g=a.toString}catch(h){return"???"}if(null!=g&&g!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;g="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=g.length&&(g+=", \n"),g+=b+c+" : "+C.__string_rec(a[c],b));b=b.substring(1);return g+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};C.__interfLoop=function(a,
b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var g=0,e=c.length;g<e;){var f=g++,f=c[f];if(f==b||C.__interfLoop(f,b))return!0}return C.__interfLoop(a.__super__,b)};C.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Nb:return(a|0)===a;case Kb:return"number"==typeof a;case Lb:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Ob:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof
b||C.__interfLoop(C.getClass(a),b)))return!0}else return!1;return b==Pb&&null!=a.__name__||b==Qb&&null!=a.__ename__?!0:a.__enum__==b}};var Db=function(){};Db.__name__=!0;Db.getContextWebGL=function(a,b){for(var c=0,g=["webgl","experimental-webgl"];c<g.length;){var e=g[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var Mb=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=
function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Nb={__name__:["Int"]},Ob={__name__:["Dynamic"]},Kb=Number;Kb.__name__=["Float"];var Lb=Boolean;Lb.__ename__=["Bool"];var Pb={__name__:["Class"]},Qb={};U.instance=new U;v.DISPATCHING_SENTINEL=new ca(null,null);i.root=new M;i.uncaughtError=new r;i.hidden=new A(!1);i.volume=new s(1);i._platform=U.instance;i._calledInit=!1;I.__meta__={obj:{assets:[{global:[{bytes:744,
md5:"abe48661625426bc379b115b1b1c163f",name:"Arial.bmfc"},{bytes:62192,md5:"9930a8f5a08449425942bedb9e7befbd",name:"Arial.fnt"},{bytes:73484,md5:"6cf73fdfb5cfab748e6be8ad116898ca",name:"Arial_0.png"},{bytes:50156,md5:"ff09074903482600cb59b570b2f096a1",name:"CherryCreamSoda.ttf"},{bytes:2629713,md5:"f7188d4d4900d9bac7a840f72d9702cd",name:"deep_leaves/deep_leaves.m4a"},{bytes:1707862,md5:"bbfea731439f0ab6d0454953eeb52fda",name:"deep_leaves/deep_leaves.mp3"},{bytes:1613503,md5:"b6dff50ed992f47546881c874e08bc03",
name:"deep_leaves/deep_leaves.ogg"},{bytes:1579,md5:"25cc8f2327c14562829cbc92c477eb9f",name:"Hero.png"},{bytes:24621,md5:"c47b1e703aa3201cecf5a31fe0290e7f",name:"REMOVE.fnt"},{bytes:95291,md5:"3334e3db95fc8227481a3b877ade8c04",name:"REMOVE.png"}]}]}};I._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();n._scratchPoint=new gb;ea.NEWLINE=new La(10);K._sharedEvent=new jb;H._sharedEvent=new kb;
y._sharedEvent=new lb;ba.CANVAS_TEXTURES=(new T("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);l._mediaRefCount=0;l._detectBlobSupport=!0;k.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];k.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new T("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);m._detectSupport=!0;L._scratchMatrix=new N;t.debug=!0;Za.main()})();
