/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function n(a,c){function h(){}h.prototype=a;var b=new h,f;for(f in c)b[f]=c[f];c.toString!==Object.prototype.toString&&(b.toString=c.toString);return b}function vb(a){return a instanceof Array?function(){return t.iter(a)}:"function"==typeof a.iterator?ia(a,a.iterator):a.iterator}function ia(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=Hb++);var h;null==a.hx__closures__?a.hx__closures__={}:h=a.hx__closures__[c.__id__];null==h&&(h=function(){return h.method.apply(h.scope,
arguments)},h.scope=a,h.method=c,a.hx__closures__[c.__id__]=h);return h}var d=function(){return z.__string_rec(this,"")},S=function(a,c){c=c.split("u").join("");this.r=RegExp(a,c)};S.__name__=!0;S.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,
len:this.r.m[0].length}},__class__:S};var t=function(){};t.__name__=!0;t.cca=function(a,c){var h=a.charCodeAt(c);return h!=h?void 0:h};t.substr=function(a,c,h){if(null!=c&&0!=c&&null!=h&&0>h)return"";null==h&&(h=a.length);0>c?(c=a.length+c,0>c&&(c=0)):0>h&&(h=a.length+h-c);return a.substr(c,h)};t.remove=function(a,c){var h=a.indexOf(c);if(-1==h)return!1;a.splice(h,1);return!0};t.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var ya=function(){};ya.__name__=!0;ya.array=function(a){for(var c=[],a=vb(a)();a.hasNext();){var h=a.next();c.push(h)}return c};ya.count=function(a,c){var h=0;if(null==c)for(var b=vb(a)();b.hasNext();)b.next(),h++;else for(b=vb(a)();b.hasNext();){var f=b.next();c(f)&&h++}return h};var wb=function(){};wb.__name__=!0;Math.__name__=!0;var ja=function(){};ja.__name__=!0;ja.field=function(a,c){try{return a[c]}catch(h){return null}};var F=function(){};F.__name__=!0;F.is=function(a,c){return z.__instanceof(a,
c)};F.instance=function(a,c){return a instanceof c?a:null};F.string=function(a){return z.__string_rec(a,"")};F.parseInt=function(a){var c=parseInt(a,10);if(0==c&&(120==t.cca(a,1)||88==t.cca(a,1)))c=parseInt(a);return isNaN(c)?null:c};var Ya=function(){};Ya.__name__=!0;Ya.startsWith=function(a,c){return a.length>=c.length&&t.substr(a,0,c.length)==c};var Q=function(){};Q.__name__=!0;Q.prototype={__class__:Q};var s=function(){this._flags=0;this.owner=this.next=null};s.__name__=!0;s.__interfaces__=[Q];
s.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:s};var R=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};R.__name__=!0;R.__interfaces__=[Q];R.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var c=a.get_name(),h=this._compMap[c];null!=h&&this.remove(h);this._compMap[c]=
a;c=null;for(h=this.firstComponent;null!=h;)c=h,h=h.next;null!=c?c.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var c=null,h=this.firstComponent;null!=h;){var b=h.next;if(h==a)return null==c?this.firstComponent=b:(c.owner=this,c.next=b),delete this._compMap[h.get_name()],0!=(h._flags&1)&&(h.onStop(),h._flags&=-2),h.onRemoved(),h.owner=null,h.next=null,!0;c=h;h=b}return!1},addChild:function(a,c){null==c&&(c=!0);null!=a.parent&&a.parent.removeChild(a);
a.parent=this;if(c){for(var b=null,e=this.firstChild;null!=e;)b=e,e=e.next;null!=b?b.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var c=null,b=this.firstChild;null!=b;){var e=b.next;if(b==a){null==c?this.firstChild=e:c.next=e;b.parent=null;b.next=null;break}c=b;b=e}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},__class__:R};var xb=function(){};xb.__name__=!0;var Za=function(){};Za.__name__=!0;Za.prototype={__class__:Za};var T=function(){};T.__name__=!0;T.__interfaces__=[Za];T.prototype={init:function(){var a=this;k.fixAndroidMath();var c=null;try{c=window.flambe.canvas}catch(b){}c.setAttribute("tabindex","0");c.style.outlineStyle="none";c.style.webkitTapHighlightColor="transparent";c.setAttribute("moz-opaque","true");this._stage=new Y(c);this._pointer=new x;this._mouse=new za(this._pointer,
c);this._renderer=this.createRenderer(c);this.mainLoop=new Z;this.musicPlaying=!1;this._canvas=c;this._container=c.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var e=0,f=function(b){if(!(1E3>b.timeStamp-e)){var h=c.getBoundingClientRect(),f=a.getX(b,h),h=a.getY(b,h);switch(b.type){case "mousedown":b.target==c&&(b.preventDefault(),a._mouse.submitDown(f,h,b.button),c.focus());break;case "mousemove":a._mouse.submitMove(f,
h);break;case "mouseup":a._mouse.submitUp(f,h,b.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,h,"mousewheel"==b.type?b.wheelDelta/40:-b.detail)&&b.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,!1);c.addEventListener("mousewheel",f,!1);c.addEventListener("DOMMouseScroll",f,!1);c.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var j="undefined"!=typeof window.ontouchstart,
f="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(j||f){var d=new Aa(this._pointer,j?4:window.navigator.msMaxTouchPoints);this._touch=d;f=function(c){var b;b=j?c.changedTouches:[c];var h=c.target.getBoundingClientRect();e=c.timeStamp;switch(c.type){case "touchstart":case "MSPointerDown":case "pointerdown":c.preventDefault();k.SHOULD_HIDE_MOBILE_BROWSER&&k.hideMobileBrowser();for(c=0;c<b.length;){var f=b[c];++c;var g=a.getX(f,h),$=a.getY(f,h);d.submitDown((j?f.identifier:
f.pointerId)|0,g,$)}break;case "touchmove":case "MSPointerMove":case "pointermove":c.preventDefault();for(c=0;c<b.length;)f=b[c],++c,g=a.getX(f,h),$=a.getY(f,h),d.submitMove((j?f.identifier:f.pointerId)|0,g,$);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(c=0;c<b.length;)f=b[c],++c,g=a.getX(f,h),$=a.getY(f,h),d.submitUp((j?f.identifier:f.pointerId)|0,g,$)}};j?(c.addEventListener("touchstart",f,!1),c.addEventListener("touchmove",f,!1),c.addEventListener("touchend",
f,!1),c.addEventListener("touchcancel",f,!1)):(c.addEventListener("MSPointerDown",f,!1),c.addEventListener("MSPointerMove",f,!1),c.addEventListener("MSPointerUp",f,!1))}else this._touch=new Ba;var g=window.onerror;window.onerror=function(a,c,b){i.uncaughtError.emit(a);return null!=g?g(a,c,b):!1};var l=k.loadExtension("hidden",window.document);null!=l.value?(f=function(){i.hidden.set__(ja.field(window.document,l.field))},f(null),window.document.addEventListener(l.prefix+"visibilitychange",f,!1)):(f=
function(a){i.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",f,!1),window.addEventListener("pagehide",f,!1));i.hidden.get_changed().connect(function(c){c||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var m=k.loadExtension("requestAnimationFrame").value;if(null!=m){var n=window.performance,o=null!=n&&k.polyfill("now",n);o?this._lastUpdate=n.now():null;var p=null,p=function(b){a.update(o?n.now():b);m(p,c)};m(p,c)}else window.setInterval(function(){a.update(Date.now())},
16);ka.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new l(this,a)).promise},getStage:function(){return this._stage},update:function(a){var c=(a-this._lastUpdate)/1E3;this._lastUpdate=a;i.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(c),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new J;var c=function(c){switch(c.type){case "keydown":a._keyboard.submitDown(c.keyCode)&&
c.preventDefault();break;case "keyup":a._keyboard.submitUp(c.keyCode)}};this._canvas.addEventListener("keydown",c,!1);this._canvas.addEventListener("keyup",c,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,c){return(a.clientX-c.left)*this._stage.get_width()/c.width},getY:function(a,c){return(a.clientY-c.top)*this._stage.get_height()/c.height},createRenderer:function(a){try{var c=yb.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=
c)if(k.detectSlowDriver(c))null;else return new Ca(this._stage,c)}catch(b){}return new aa(a)},__class__:T};var A=function(a,c){this._value=a;this._changed=null!=c?new la(c):null};A.__name__=!0;A.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},get__:function(){return this._value},set__:function(a){var c=this._value;a!=c&&(this._value=a,null!=this._changed&&this._changed.emit(a,c));return a},get_changed:function(){null==this._changed&&(this._changed=new la);
return this._changed},__class__:A};var ba=function(a,c){this._next=null;this._signal=a;this._listener=c;this.stayInList=!0};ba.__name__=!0;ba.__interfaces__=[Q];ba.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:ba};var u=function(a){this._head=null!=a?new ba(this,a):null;this._deferredTasks=null};u.__name__=!0;u.prototype={connectImpl:function(a,c){var b=this,e=new ba(this,a);this._head==
u.DISPATCHING_SENTINEL?this.defer(function(){b.listAdd(e,c)}):this.listAdd(e,c);return e},disconnect:function(a){var c=this;this._head==u.DISPATCHING_SENTINEL?this.defer(function(){c.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var c=null,b=this._deferredTasks;null!=b;)c=b,b=b.next;a=new $a(a);null!=c?c.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=u.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=
null;null!=a;)a.fn(),a=a.next},listAdd:function(a,c){if(c)a._next=this._head,this._head=a;else{for(var b=null,e=this._head;null!=e;)b=e,e=e._next;null!=b?b._next=a:this._head=a}},listRemove:function(a){for(var c=null,b=this._head;null!=b;){if(b==a){a=b._next;null==c?this._head=a:c._next=a;break}c=b;b=b._next}},__class__:u};var la=function(a){u.call(this,a)};la.__name__=!0;la.__super__=u;la.prototype=n(u.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a,
c){var b=this;this._head==u.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a,c)}):this.emitImpl(a,c)},emitImpl:function(a,c){for(var b=this.willEmit(),e=b;null!=e;)e._listener(a,c),e.stayInList||e.dispose(),e=e._next;this.didEmit(b)},__class__:la});var q=function(a){u.call(this,a)};q.__name__=!0;q.__super__=u;q.prototype=n(u.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a){var c=this;this._head==u.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a)}):
this.emitImpl(a)},emitImpl:function(a){for(var c=this.willEmit(),b=c;null!=b;)b._listener(a),b.stayInList||b.dispose(),b=b._next;this.didEmit(c)},__class__:q});var v=function(a,c){this._behavior=null;A.call(this,a,c)};v.__name__=!0;v.__super__=A;v.prototype=n(A.prototype,{set__:function(a){this._behavior=null;return A.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(A.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,
c,b){this.set_behavior(new ma(this._value,a,c,b))},animateBy:function(a,c,b){this.set_behavior(new ma(this._value,this._value+a,c,b))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:v});var i=function(){};i.__name__=!0;i.init=function(){i._calledInit||(i._platform.init(),i._calledInit=!0)};var ka=function(){};ka.__name__=!0;ka.info=function(){null};ka.__super__=xb;ka.prototype=n(xb.prototype,{__class__:ka});var ab=function(){this._realDt=0};ab.__name__=!0;ab.__super__=
s;ab.prototype=n(s.prototype,{get_name:function(){return"SpeedAdjuster_2"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:ab});var Da=function(){};Da.__name__=!0;Da.prototype={__class__:Da};var zb=function(){};zb.__name__=!0;zb.linear=function(a){return a};var ma=function(a,c,b,e){this._from=a;this._to=c;this._duration=b;this.elapsed=0;this._easing=null!=e?e:zb.linear};ma.__name__=!0;ma.__interfaces__=[Da];ma.prototype={update:function(a){this.elapsed+=
a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:ma};var V=function(){};V.__name__=!0;V.__interfaces__=[Q];V.prototype={__class__:V};var g={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};g.WEBP.toString=d;g.WEBP.__enum__=g;g.JXR=["JXR",1];g.JXR.toString=d;g.JXR.__enum__=g;g.PNG=["PNG",2];
g.PNG.toString=d;g.PNG.__enum__=g;g.JPG=["JPG",3];g.JPG.toString=d;g.JPG.__enum__=g;g.GIF=["GIF",4];g.GIF.toString=d;g.GIF.__enum__=g;g.DDS=["DDS",5];g.DDS.toString=d;g.DDS.__enum__=g;g.PVR=["PVR",6];g.PVR.toString=d;g.PVR.__enum__=g;g.PKM=["PKM",7];g.PKM.toString=d;g.PKM.__enum__=g;g.MP3=["MP3",8];g.MP3.toString=d;g.MP3.__enum__=g;g.M4A=["M4A",9];g.M4A.toString=d;g.M4A.__enum__=g;g.OPUS=["OPUS",10];g.OPUS.toString=d;g.OPUS.__enum__=g;g.OGG=["OGG",11];g.OGG.toString=d;g.OGG.__enum__=g;g.WAV=["WAV",
12];g.WAV.toString=d;g.WAV.__enum__=g;g.Data=["Data",13];g.Data.toString=d;g.Data.__enum__=g;var bb=function(a,c,b,e){this.name=a;this.url=c;this.format=b;this.bytes=e};bb.__name__=!0;bb.prototype={__class__:bb};var Ea=function(){};Ea.__name__=!0;Ea.__interfaces__=[Q];Ea.prototype={__class__:Ea};var Fa=function(){};Fa.__name__=!0;Fa.__interfaces__=[V];Fa.prototype={__class__:Fa};var G=function(){this._localBase=this._remoteBase=null;this._entries=[]};G.__name__=!0;G.fromAssets=function(a,c){null==
c&&(c=!0);var b=ja.field(Ab.getType(G).assets[0],a);if(null==b){if(c)throw B.withFields("Missing asset pack",["name",a]);return null}var e=new G;e.set_localBase("assets");for(var f=0;f<b.length;){var j=b[f];++f;var d=j.name,$=a+"/"+d+"?v="+F.string(j.md5),i=G.inferFormat(d);i!=g.Data&&(d=B.removeFileExtension(d));e.add(d,$,j.bytes,i)}return e};G.inferFormat=function(a){a=B.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return g.GIF;case "jpg":case "jpeg":return g.JPG;case "jxr":case "wdp":return g.JXR;
case "png":return g.PNG;case "webp":return g.WEBP;case "dds":return g.DDS;case "pvr":return g.PVR;case "pkm":return g.PKM;case "m4a":return g.M4A;case "mp3":return g.MP3;case "ogg":return g.OGG;case "opus":return g.OPUS;case "wav":return g.WAV}else null;return g.Data};G.prototype={add:function(a,c,b,e){null==b&&(b=0);null==e&&(e=G.inferFormat(c));a=new bb(a,c,e,b);this._entries.push(a);return a},iterator:function(){return t.iter(this._entries)},getFullURL:function(a){var c;c=null!=this.get_remoteBase()&&
G._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=c?B.joinPath(c,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Bb.that(!Ya.startsWith(a,"http://")&&!Ya.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:G};var p={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),
Normal:["Normal",0]};p.Normal.toString=d;p.Normal.__enum__=p;p.Add=["Add",1];p.Add.toString=d;p.Add.__enum__=p;p.Multiply=["Multiply",2];p.Multiply.toString=d;p.Multiply.__enum__=p;p.Screen=["Screen",3];p.Screen.toString=d;p.Screen.__enum__=p;p.Mask=["Mask",4];p.Mask.toString=d;p.Mask.__enum__=p;p.Copy=["Copy",5];p.Copy.toString=d;p.Copy.__enum__=p;var cb=function(a,c){null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=c};cb.__name__=!0;cb.prototype={__class__:cb};var o=function(){this.blendMode=this.scissor=
null;var a=this;s.call(this);this._flags|=54;this._localMatrix=new M;var c=function(){a._flags|=24};this.x=new v(0,c);this.y=new v(0,c);this.rotation=new v(0,c);this.scaleX=new v(1,c);this.scaleY=new v(1,c);this.anchorX=new v(0,c);this.anchorY=new v(0,c);this.alpha=new v(1)};o.__name__=!0;o.hitTest=function(a,c,b){var e=a._compMap.Sprite_0;if(null!=e){if(6!=(e._flags&6))return null;e.getLocalMatrix().inverseTransform(c,b,o._scratchPoint)&&(c=o._scratchPoint.x,b=o._scratchPoint.y);var f=e.scissor;
if(null!=f&&!f.contains(c,b))return null}a=o.hitTestBackwards(a.firstChild,c,b);return null!=a?a:null!=e&&e.containsLocal(c,b)?e:null};o.render=function(a,c){var b=a._compMap.Sprite_0;if(null!=b){var e=b.alpha._value;if(0==(b._flags&2)||0>=e)return;c.save();1>e&&c.multiplyAlpha(e);null!=b.blendMode&&c.setBlendMode(b.blendMode);var e=b.getLocalMatrix(),f=e.m02,j=e.m12;0!=(b._flags&32)&&(f=Math.round(f),j=Math.round(j));c.transform(e.m00,e.m10,e.m01,e.m11,f,j);e=b.scissor;null!=e&&c.applyScissor(e.x,
e.y,e.width,e.height);b.draw(c)}e=a._compMap.Director_1;if(null!=e){e=e.occludedScenes;for(f=0;f<e.length;)j=e[f],++f,o.render(j,c)}for(e=a.firstChild;null!=e;)f=e.next,o.render(e,c),e=f;null!=b&&c.restore()};o.hitTestBackwards=function(a,c,b){if(null!=a){var e=o.hitTestBackwards(a.next,c,b);return null!=e?e:o.hitTest(a,c,b)}return null};o.__super__=s;o.prototype=n(s.prototype,{get_name:function(){return"Sprite_0"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,
c){return 0<=a&&a<this.getNaturalWidth()&&0<=c&&c<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},setXY:function(a,c){this.x.set__(a);this.y.set__(c);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=
this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var c=a._compMap.Sprite_0;if(null!=c)return c;a=a.parent}return null},connectHover:function(){var a=this;null==
this._hoverConnection&&(this._hoverConnection=i._platform.getPointer().move.connect(function(c){for(var b=c.hit;null!=b;){if(b==a)return;b=b.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(c);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==
(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:o});var ca=function(a,c,b){o.call(this);this.color=a;this.width=new v(c);
this.height=new v(b)};ca.__name__=!0;ca.__super__=o;ca.prototype=n(o.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){o.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:ca});var Ga=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=
this.height=0;this.charCode=a};Ga.__name__=!0;Ga.prototype={setKerning:function(a,c){null==this._kernings&&(this._kernings=new N);this._kernings.set(a,c)},__class__:Ga};var da=function(a,c){this.name=c;this._pack=a;this._file=a.getFile(c+".fnt");this.reload()};da.__name__=!0;da.prototype={reload:function(){this._glyphs=new N;this._glyphs.set(da.NEWLINE.charCode,da.NEWLINE);for(var a=new ea(this._file.toString()),c=new N,b=this.name.lastIndexOf("/"),b=0<=b?t.substr(this.name,0,b+1):"",e=a.keywords();e.hasNext();)switch(e.next()){case "info":for(var f=
a.pairs();f.hasNext();){var j=f.next();switch(j.key){case "size":this.size=j.getInt()}}break;case "common":for(f=a.pairs();f.hasNext();)switch(j=f.next(),j.key){case "lineHeight":this.lineHeight=j.getInt()}break;case "page":for(var f=0,j=null,d=a.pairs();d.hasNext();){var g=d.next();switch(g.key){case "id":f=g.getInt();break;case "file":j=g.getString()}}j=this._pack.getTexture(b+B.removeFileExtension(j));c.set(f,j);break;case "char":f=null;for(j=a.pairs();j.hasNext();)switch(d=j.next(),d.key){case "id":f=
new Ga(d.getInt());break;case "x":f.x=d.getInt();break;case "y":f.y=d.getInt();break;case "width":f.width=d.getInt();break;case "height":f.height=d.getInt();break;case "page":d=d.getInt();f.page=c.get(d);break;case "xoffset":f.xOffset=d.getInt();break;case "yoffset":f.yOffset=d.getInt();break;case "xadvance":f.xAdvance=d.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;d=j=0;for(g=a.pairs();g.hasNext();){var i=g.next();switch(i.key){case "first":f=this._glyphs.get(i.getInt());break;
case "second":j=i.getInt();break;case "amount":d=i.getInt()}}null!=f&&0!=d&&f.setKerning(j,d)}},__class__:da};var ea=function(a){this._configText=a;this._keywordPattern=new S("([A-Za-z]+)(.*)","");this._pairPattern=new S('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};ea.__name__=!0;ea.advance=function(a,c){var b=c.matchedPos();return t.substr(a,b.pos+b.len,a.length)};ea.prototype={keywords:function(){var a=this,c=this._configText;return{next:function(){c=ea.advance(c,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);
return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(c)}}},pairs:function(){var a=this,c=this._pairText;return{next:function(){c=ea.advance(c,a._pairPattern);return new db(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(c)}}},__class__:ea};var db=function(a,c){this.key=a;this._value=c};db.__name__=!0;db.prototype={getInt:function(){return F.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?
null:t.substr(this._value,1,this._value.length-2)},__class__:db};var eb=function(){};eb.__name__=!0;eb.prototype={__class__:eb};var na=function(a){o.call(this);this.texture=a};na.__name__=!0;na.__super__=o;na.prototype=n(o.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:na});var U={__ename__:!0,
__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};U.Portrait.toString=d;U.Portrait.__enum__=U;U.Landscape=["Landscape",1];U.Landscape.toString=d;U.Landscape.__enum__=U;var Ha=function(){};Ha.__name__=!0;Ha.__interfaces__=[V];Ha.prototype={__class__:Ha};var Cb=function(){};Cb.__name__=!0;Cb.__interfaces__=[Ha];var b={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(","),
A:["A",0]};b.A.toString=d;b.A.__enum__=b;b.B=["B",1];b.B.toString=d;b.B.__enum__=b;b.C=["C",2];b.C.toString=d;b.C.__enum__=b;b.D=["D",3];b.D.toString=d;b.D.__enum__=b;b.E=["E",4];b.E.toString=d;b.E.__enum__=b;b.F=["F",5];b.F.toString=d;b.F.__enum__=b;b.G=["G",6];b.G.toString=d;b.G.__enum__=b;b.H=["H",7];b.H.toString=d;b.H.__enum__=b;b.I=["I",8];b.I.toString=d;b.I.__enum__=b;b.J=["J",9];b.J.toString=d;b.J.__enum__=b;b.K=["K",10];b.K.toString=d;b.K.__enum__=b;b.L=["L",11];b.L.toString=d;b.L.__enum__=
b;b.M=["M",12];b.M.toString=d;b.M.__enum__=b;b.N=["N",13];b.N.toString=d;b.N.__enum__=b;b.O=["O",14];b.O.toString=d;b.O.__enum__=b;b.P=["P",15];b.P.toString=d;b.P.__enum__=b;b.Q=["Q",16];b.Q.toString=d;b.Q.__enum__=b;b.R=["R",17];b.R.toString=d;b.R.__enum__=b;b.S=["S",18];b.S.toString=d;b.S.__enum__=b;b.T=["T",19];b.T.toString=d;b.T.__enum__=b;b.U=["U",20];b.U.toString=d;b.U.__enum__=b;b.V=["V",21];b.V.toString=d;b.V.__enum__=b;b.W=["W",22];b.W.toString=d;b.W.__enum__=b;b.X=["X",23];b.X.toString=
d;b.X.__enum__=b;b.Y=["Y",24];b.Y.toString=d;b.Y.__enum__=b;b.Z=["Z",25];b.Z.toString=d;b.Z.__enum__=b;b.Number0=["Number0",26];b.Number0.toString=d;b.Number0.__enum__=b;b.Number1=["Number1",27];b.Number1.toString=d;b.Number1.__enum__=b;b.Number2=["Number2",28];b.Number2.toString=d;b.Number2.__enum__=b;b.Number3=["Number3",29];b.Number3.toString=d;b.Number3.__enum__=b;b.Number4=["Number4",30];b.Number4.toString=d;b.Number4.__enum__=b;b.Number5=["Number5",31];b.Number5.toString=d;b.Number5.__enum__=
b;b.Number6=["Number6",32];b.Number6.toString=d;b.Number6.__enum__=b;b.Number7=["Number7",33];b.Number7.toString=d;b.Number7.__enum__=b;b.Number8=["Number8",34];b.Number8.toString=d;b.Number8.__enum__=b;b.Number9=["Number9",35];b.Number9.toString=d;b.Number9.__enum__=b;b.Numpad0=["Numpad0",36];b.Numpad0.toString=d;b.Numpad0.__enum__=b;b.Numpad1=["Numpad1",37];b.Numpad1.toString=d;b.Numpad1.__enum__=b;b.Numpad2=["Numpad2",38];b.Numpad2.toString=d;b.Numpad2.__enum__=b;b.Numpad3=["Numpad3",39];b.Numpad3.toString=
d;b.Numpad3.__enum__=b;b.Numpad4=["Numpad4",40];b.Numpad4.toString=d;b.Numpad4.__enum__=b;b.Numpad5=["Numpad5",41];b.Numpad5.toString=d;b.Numpad5.__enum__=b;b.Numpad6=["Numpad6",42];b.Numpad6.toString=d;b.Numpad6.__enum__=b;b.Numpad7=["Numpad7",43];b.Numpad7.toString=d;b.Numpad7.__enum__=b;b.Numpad8=["Numpad8",44];b.Numpad8.toString=d;b.Numpad8.__enum__=b;b.Numpad9=["Numpad9",45];b.Numpad9.toString=d;b.Numpad9.__enum__=b;b.NumpadAdd=["NumpadAdd",46];b.NumpadAdd.toString=d;b.NumpadAdd.__enum__=b;b.NumpadDecimal=
["NumpadDecimal",47];b.NumpadDecimal.toString=d;b.NumpadDecimal.__enum__=b;b.NumpadDivide=["NumpadDivide",48];b.NumpadDivide.toString=d;b.NumpadDivide.__enum__=b;b.NumpadEnter=["NumpadEnter",49];b.NumpadEnter.toString=d;b.NumpadEnter.__enum__=b;b.NumpadMultiply=["NumpadMultiply",50];b.NumpadMultiply.toString=d;b.NumpadMultiply.__enum__=b;b.NumpadSubtract=["NumpadSubtract",51];b.NumpadSubtract.toString=d;b.NumpadSubtract.__enum__=b;b.F1=["F1",52];b.F1.toString=d;b.F1.__enum__=b;b.F2=["F2",53];b.F2.toString=
d;b.F2.__enum__=b;b.F3=["F3",54];b.F3.toString=d;b.F3.__enum__=b;b.F4=["F4",55];b.F4.toString=d;b.F4.__enum__=b;b.F5=["F5",56];b.F5.toString=d;b.F5.__enum__=b;b.F6=["F6",57];b.F6.toString=d;b.F6.__enum__=b;b.F7=["F7",58];b.F7.toString=d;b.F7.__enum__=b;b.F8=["F8",59];b.F8.toString=d;b.F8.__enum__=b;b.F9=["F9",60];b.F9.toString=d;b.F9.__enum__=b;b.F10=["F10",61];b.F10.toString=d;b.F10.__enum__=b;b.F11=["F11",62];b.F11.toString=d;b.F11.__enum__=b;b.F12=["F12",63];b.F12.toString=d;b.F12.__enum__=b;b.F13=
["F13",64];b.F13.toString=d;b.F13.__enum__=b;b.F14=["F14",65];b.F14.toString=d;b.F14.__enum__=b;b.F15=["F15",66];b.F15.toString=d;b.F15.__enum__=b;b.Left=["Left",67];b.Left.toString=d;b.Left.__enum__=b;b.Up=["Up",68];b.Up.toString=d;b.Up.__enum__=b;b.Right=["Right",69];b.Right.toString=d;b.Right.__enum__=b;b.Down=["Down",70];b.Down.toString=d;b.Down.__enum__=b;b.Alt=["Alt",71];b.Alt.toString=d;b.Alt.__enum__=b;b.Backquote=["Backquote",72];b.Backquote.toString=d;b.Backquote.__enum__=b;b.Backslash=
["Backslash",73];b.Backslash.toString=d;b.Backslash.__enum__=b;b.Backspace=["Backspace",74];b.Backspace.toString=d;b.Backspace.__enum__=b;b.CapsLock=["CapsLock",75];b.CapsLock.toString=d;b.CapsLock.__enum__=b;b.Comma=["Comma",76];b.Comma.toString=d;b.Comma.__enum__=b;b.Command=["Command",77];b.Command.toString=d;b.Command.__enum__=b;b.Control=["Control",78];b.Control.toString=d;b.Control.__enum__=b;b.Delete=["Delete",79];b.Delete.toString=d;b.Delete.__enum__=b;b.End=["End",80];b.End.toString=d;b.End.__enum__=
b;b.Enter=["Enter",81];b.Enter.toString=d;b.Enter.__enum__=b;b.Equals=["Equals",82];b.Equals.toString=d;b.Equals.__enum__=b;b.Escape=["Escape",83];b.Escape.toString=d;b.Escape.__enum__=b;b.Home=["Home",84];b.Home.toString=d;b.Home.__enum__=b;b.Insert=["Insert",85];b.Insert.toString=d;b.Insert.__enum__=b;b.LeftBracket=["LeftBracket",86];b.LeftBracket.toString=d;b.LeftBracket.__enum__=b;b.Minus=["Minus",87];b.Minus.toString=d;b.Minus.__enum__=b;b.PageDown=["PageDown",88];b.PageDown.toString=d;b.PageDown.__enum__=
b;b.PageUp=["PageUp",89];b.PageUp.toString=d;b.PageUp.__enum__=b;b.Period=["Period",90];b.Period.toString=d;b.Period.__enum__=b;b.Quote=["Quote",91];b.Quote.toString=d;b.Quote.__enum__=b;b.RightBracket=["RightBracket",92];b.RightBracket.toString=d;b.RightBracket.__enum__=b;b.Semicolon=["Semicolon",93];b.Semicolon.toString=d;b.Semicolon.__enum__=b;b.Shift=["Shift",94];b.Shift.toString=d;b.Shift.__enum__=b;b.Slash=["Slash",95];b.Slash.toString=d;b.Slash.__enum__=b;b.Space=["Space",96];b.Space.toString=
d;b.Space.__enum__=b;b.Tab=["Tab",97];b.Tab.toString=d;b.Tab.__enum__=b;b.Menu=["Menu",98];b.Menu.toString=d;b.Menu.__enum__=b;b.Search=["Search",99];b.Search.toString=d;b.Search.__enum__=b;b.Unknown=function(a){a=["Unknown",100,a];a.__enum__=b;a.toString=d;return a};var fb=function(){this.init(0,null)};fb.__name__=!0;fb.prototype={init:function(a,c){this.id=a;this.key=c},__class__:fb};var y={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};y.Left.toString=d;y.Left.__enum__=
y;y.Middle=["Middle",1];y.Middle.toString=d;y.Middle.__enum__=y;y.Right=["Right",2];y.Right.toString=d;y.Right.__enum__=y;y.Unknown=function(a){a=["Unknown",3,a];a.__enum__=y;a.toString=d;return a};var K={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};K.Default.toString=d;K.Default.__enum__=K;K.Button=["Button",1];K.Button.toString=d;K.Button.__enum__=K;K.None=["None",2];K.None.toString=d;K.None.__enum__=K;var gb=function(){this.init(0,0,0,null)};gb.__name__=!0;gb.prototype=
{init:function(a,c,b,e){this.id=a;this.viewX=c;this.viewY=b;this.button=e},__class__:gb};var oa={__ename__:!0,__constructs__:["Mouse","Touch"]};oa.Mouse=function(a){a=["Mouse",0,a];a.__enum__=oa;a.toString=d;return a};oa.Touch=function(a){a=["Touch",1,a];a.__enum__=oa;a.toString=d;return a};var hb=function(){this.init(0,0,0,null,null)};hb.__name__=!0;hb.prototype={init:function(a,c,b,e,f){this.id=a;this.viewX=c;this.viewY=b;this.hit=e;this.source=f;this._stopped=!1},__class__:hb};var ib=function(a){this.id=
a;this._source=oa.Touch(this)};ib.__name__=!0;ib.prototype={init:function(a,c){this.viewX=a;this.viewY=c},__class__:ib};var O=function(){};O.__name__=!0;O.max=function(a,c){return a>c?a:c};O.min=function(a,c){return a<c?a:c};O.sign=function(a){return 0>a?-1:0<a?1:0};var M=function(){this.identity()};M.__name__=!0;M.multiply=function(a,c,b){null==b&&(b=new M);var e=a.m00*c.m00+a.m01*c.m10,f=a.m00*c.m01+a.m01*c.m11,j=a.m00*c.m02+a.m01*c.m12+a.m02;b.m00=e;b.m01=f;b.m02=j;e=a.m10*c.m00+a.m11*c.m10;f=
a.m10*c.m01+a.m11*c.m11;j=a.m10*c.m02+a.m11*c.m12+a.m12;b.m10=e;b.m11=f;b.m12=j;return b};M.prototype={set:function(a,c,b,e,f,j){this.m00=a;this.m01=b;this.m02=f;this.m10=c;this.m11=e;this.m12=j},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,c,b,e,f){var j=Math.sin(f),f=Math.cos(f);this.set(f*b,j*b,-j*e,f*e,a,c)},translate:function(a,c){this.m02+=this.m00*a+this.m01*c;this.m12+=this.m11*c+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/
a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,c,b){for(var e=0;e<c;){var f=a[e],j=a[e+1];b[e++]=f*this.m00+j*this.m01+this.m02;b[e++]=f*this.m10+j*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,c,b){var e=this.determinant();if(0==e)return!1;a-=this.m02;c-=this.m12;b.x=(a*this.m11-c*this.m01)/e;b.y=(c*this.m00-a*this.m10)/e;return!0},clone:function(a){null==
a&&(a=new M);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:M};var Ia=function(a,c,b,e){null==e&&(e=0);null==b&&(b=0);null==c&&(c=0);null==a&&(a=0);this.set(a,c,b,e)};Ia.__name__=!0;Ia.prototype={set:function(a,c,b,e){this.x=a;this.y=c;this.width=b;this.height=e},contains:function(a,c){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;c-=this.y;if(0<=this.height){if(0>c||c>this.height)return!1}else if(0<c||c<this.height)return!1;
return!0},clone:function(a){null==a&&(a=new Ia);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:Ia};var w=function(){this._disposed=!1};w.__name__=!0;w.__interfaces__=[V];w.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:w};var W=function(a,c){var b=this;this.manifest=c;this._platform=a;this.promise=new Ja;this._bytesLoaded=
new D;this._pack=new Ka(c,this);var e=ya.array(c);if(0==e.length)this.handleSuccess();else{for(var f=new D,j=0;j<e.length;){var d=e[j];++j;var g=f.get(d.name);null==g&&(g=[],f.set(d.name,g));g.push(d)}this._assetsRemaining=ya.count(f);for(e=f.iterator();e.hasNext();)f=[e.next()],this.pickBestEntry(f[0],function(a){return function(e){if(null!=e){var f=c.getFullURL(e);try{b.loadEntry(f,e)}catch(j){b.handleError(e,"Unexpected error: "+F.string(j))}f=b.promise;f.set_total(f._total+e.bytes)}else e=a[0][0],
W.isAudio(e.format)?b.handleLoad(e,H.getInstance()):b.handleError(e,"Could not find a supported format to load")}}(f))}};W.__name__=!0;W.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};W.prototype={onDisposed:function(){},pickBestEntry:function(a,c){this.getAssetFormats(function(b){for(var e=0;e<b.length;){var f=b[e];++e;for(var j=0;j<a.length;){var d=a[j];++j;if(d.format==f){c(d);return}}}c(null)})},loadEntry:function(){null},getAssetFormats:function(){null},
handleLoad:function(a,c){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var b;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:b=this._pack.sounds;break;case 13:b=this._pack.files}b.set(a.name,c);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,c){this._bytesLoaded.set(a.name,c);for(var b=0,e=this._bytesLoaded.iterator();e.hasNext();)var f=e.next(),
b=b+f;this.promise.set_progress(b)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,c){this.promise.error.emit(B.withFields(c,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:W};var Ka=function(a,c){this.disposed=!1;this._manifest=a;this.loader=c;this.textures=new D;this.sounds=new D;this.files=new D};Ka.__name__=!0;Ka.__interfaces__=[Ea];Ka.prototype={getTexture:function(a,
c){null==c&&(c=!0);var b=this.textures.get(a);if(null==b&&c)throw B.withFields("Missing texture",["name",a]);return b},getSound:function(a,c){null==c&&(c=!0);var b=this.sounds.get(a);if(null==b&&c)throw B.withFields("Missing sound",["name",a]);return b},getFile:function(a,c){null==c&&(c=!0);var b=this.files.get(a);if(null==b&&c)throw B.withFields("Missing file",["name",a]);return b},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();
this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:Ka};var pa=function(a){this._disposed=!1;this._content=a};pa.__name__=!0;pa.__interfaces__=[Fa];pa.__super__=w;pa.prototype=n(w.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:pa});var jb=function(){};jb.__name__=!0;jb.prototype={__class__:jb};
var J=function(){this.down=new q;this.up=new q;this.backButton=new fa;this._keyStates=new N};J.__name__=!0;J.__interfaces__=[jb];J.prototype={isDown:function(a){return this.isCodeDown(qa.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),J._sharedEvent.init(J._sharedEvent.id+1,qa.toKey(a)),this.down.emit(J._sharedEvent));
return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),J._sharedEvent.init(J._sharedEvent.id+1,qa.toKey(a)),this.up.emit(J._sharedEvent))},__class__:J};var Eb=function(){};Eb.__name__=!0;var E=function(a){this._pointer=a;this._source=oa.Mouse(E._sharedEvent);this.down=new q;this.move=new q;this.up=new q;this.scroll=new q;this._y=this._x=0;this._cursor=K.Default;this._buttonStates=new N};E.__name__=!0;E.__interfaces__=[Eb];E.prototype={submitDown:function(a,c,b){this._buttonStates.exists(b)||
(this._buttonStates.set(b,!0),this.prepare(a,c,kb.toButton(b)),this._pointer.submitDown(a,c,this._source),this.down.emit(E._sharedEvent))},submitMove:function(a,c){this.prepare(a,c,null);this._pointer.submitMove(a,c,this._source);this.move.emit(E._sharedEvent)},submitUp:function(a,c,b){this._buttonStates.exists(b)&&(this._buttonStates.remove(b),this.prepare(a,c,kb.toButton(b)),this._pointer.submitUp(a,c,this._source),this.up.emit(E._sharedEvent))},submitScroll:function(a,c,b){this._x=a;this._y=c;
if(null==this.scroll._head)return!1;this.scroll.emit(b);return!0},prepare:function(a,c,b){this._x=a;this._y=c;E._sharedEvent.init(E._sharedEvent.id+1,a,c,b)},__class__:E};var lb=function(){};lb.__name__=!0;lb.prototype={__class__:lb};var x=function(a,c,b){null==b&&(b=!1);null==c&&(c=0);null==a&&(a=0);this.down=new q;this.move=new q;this.up=new q;this._x=a;this._y=c;this._isDown=b};x.__name__=!0;x.__interfaces__=[lb];x.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,
c,b){if(!this._isDown){this.submitMove(a,c,b);this._isDown=!0;var e=[],f=o.hitTest(i.root,a,c);if(null!=f){var j=f.owner;do{var d=j._compMap.Sprite_0;null!=d&&e.push(d);j=j.parent}while(null!=j)}this.prepare(a,c,f,b);for(a=0;a<e.length;)if(c=e[a],++a,c.onPointerDown(x._sharedEvent),x._sharedEvent._stopped)return;this.down.emit(x._sharedEvent)}},submitMove:function(a,c,b){if(!(a==this._x&&c==this._y)){var e=[],f=o.hitTest(i.root,a,c);if(null!=f){var j=f.owner;do{var d=j._compMap.Sprite_0;null!=d&&
e.push(d);j=j.parent}while(null!=j)}this.prepare(a,c,f,b);for(a=0;a<e.length;)if(c=e[a],++a,c.onPointerMove(x._sharedEvent),x._sharedEvent._stopped)return;this.move.emit(x._sharedEvent)}},submitUp:function(a,c,b){if(this._isDown){this.submitMove(a,c,b);this._isDown=!1;var e=[],f=o.hitTest(i.root,a,c);if(null!=f){var j=f.owner;do{var d=j._compMap.Sprite_0;null!=d&&e.push(d);j=j.parent}while(null!=j)}this.prepare(a,c,f,b);for(a=0;a<e.length;)if(c=e[a],++a,c.onPointerUp(x._sharedEvent),x._sharedEvent._stopped)return;
this.up.emit(x._sharedEvent)}},prepare:function(a,c,b,e){this._x=a;this._y=c;x._sharedEvent.init(x._sharedEvent.id+1,a,c,b,e)},__class__:x};var P=function(a,c,b){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=c;this._height=b};P.__name__=!0;P.__interfaces__=[Cb];P.__super__=w;P.prototype=n(w.prototype,{subTexture:function(a,c,b,e){b=this.root.createTexture(b,e);b._parent=this;b._x=a;b._y=c;b.rootX=this.rootX+a;b.rootY=this.rootY+c;return b},split:function(a,
c){null==c&&(c=1);for(var b=[],e=this._width/a|0,f=this._height/c|0,j=0;j<c;)for(var d=j++,g=0;g<a;){var i=g++;b.push(this.subTexture(i*e,d*f,e,f))}return b},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:P});var Db=function(){};Db.__name__=!0;var Aa=function(a,c){null==c&&(c=4);this._pointer=a;this._maxPoints=c;this._pointMap=new N;this._points=[];this.down=new q;this.move=new q;this.up=
new q};Aa.__name__=!0;Aa.__interfaces__=[Db];Aa.prototype={submitDown:function(a,c,b){if(!this._pointMap.exists(a)){var e=new ib(a);e.init(c,b);this._pointMap.set(a,e);this._points.push(e);null==this._pointerTouch&&(this._pointerTouch=e,this._pointer.submitDown(c,b,e._source));this.down.emit(e)}},submitMove:function(a,c,b){a=this._pointMap.get(a);null!=a&&(a.init(c,b),this._pointerTouch==a&&this._pointer.submitMove(c,b,a._source),this.move.emit(a))},submitUp:function(a,c,b){var e=this._pointMap.get(a);
null!=e&&(e.init(c,b),this._pointMap.remove(a),t.remove(this._points,e),this._pointerTouch==e&&(this._pointerTouch=null,this._pointer.submitUp(c,b,e._source)),this.up.emit(e))},__class__:Aa};var ga=function(){};ga.__name__=!0;ga.__interfaces__=[V];ga.prototype={__class__:ga};var H=function(){this._disposed=!1;this._playback=new La(this)};H.__name__=!0;H.__interfaces__=[ga];H.getInstance=function(){null==H._instance&&(H._instance=new H);return H._instance};H.__super__=w;H.prototype=n(w.prototype,{play:function(){return this._playback},
loop:function(){return this._playback},onDisposed:function(){},__class__:H});var ha=function(){};ha.__name__=!0;ha.__interfaces__=[Q];ha.prototype={__class__:ha};var La=function(a){this._sound=a;this.volume=new v(0);this._complete=new A(!0)};La.__name__=!0;La.__interfaces__=[ha];La.prototype={get_complete:function(){return this._complete},get_position:function(){return 0},dispose:function(){},__class__:La};var Ba=function(){this.down=new q;this.move=new q;this.up=new q};Ba.__name__=!0;Ba.__interfaces__=
[Db];Ba.prototype={__class__:Ba};var ra=function(){this._entries=[]};ra.__name__=!0;ra.__interfaces__=[Q];ra.prototype={addListener:function(a,c,b){a.addEventListener(c,b,!1);this._entries.push(new mb(a,c,b))},addDisposingListener:function(a,c,b){var e=this;this.addListener(a,c,function(a){e.dispose();b(a)})},dispose:function(){for(var a=0,c=this._entries;a<c.length;){var b=c[a];++a;b.dispatcher.removeEventListener(b.type,b.listener,!1)}this._entries=[]},__class__:ra};var mb=function(a,c,b){this.dispatcher=
a;this.type=c;this.listener=b};mb.__name__=!0;mb.prototype={__class__:mb};var sa=function(){};sa.__name__=!0;sa.__interfaces__=[eb];sa.prototype={__class__:sa};var nb=function(){};nb.__name__=!0;nb.prototype={__class__:nb};var ta=function(){};ta.__name__=!0;ta.__interfaces__=[nb];ta.prototype={__class__:ta};var qa=function(){};qa.__name__=!0;qa.toKey=function(a){switch(a){case 65:return b.A;case 66:return b.B;case 67:return b.C;case 68:return b.D;case 69:return b.E;case 70:return b.F;case 71:return b.G;
case 72:return b.H;case 73:return b.I;case 74:return b.J;case 75:return b.K;case 76:return b.L;case 77:return b.M;case 78:return b.N;case 79:return b.O;case 80:return b.P;case 81:return b.Q;case 82:return b.R;case 83:return b.S;case 84:return b.T;case 85:return b.U;case 86:return b.V;case 87:return b.W;case 88:return b.X;case 89:return b.Y;case 90:return b.Z;case 48:return b.Number0;case 49:return b.Number1;case 50:return b.Number2;case 51:return b.Number3;case 52:return b.Number4;case 53:return b.Number5;
case 54:return b.Number6;case 55:return b.Number7;case 56:return b.Number8;case 57:return b.Number9;case 96:return b.Numpad0;case 97:return b.Numpad1;case 98:return b.Numpad2;case 99:return b.Numpad3;case 100:return b.Numpad4;case 101:return b.Numpad5;case 102:return b.Numpad6;case 103:return b.Numpad7;case 104:return b.Numpad8;case 105:return b.Numpad9;case 107:return b.NumpadAdd;case 110:return b.NumpadDecimal;case 111:return b.NumpadDivide;case 108:return b.NumpadEnter;case 106:return b.NumpadMultiply;
case 109:return b.NumpadSubtract;case 112:return b.F1;case 113:return b.F2;case 114:return b.F3;case 115:return b.F4;case 116:return b.F5;case 117:return b.F6;case 118:return b.F7;case 119:return b.F8;case 120:return b.F9;case 121:return b.F10;case 122:return b.F11;case 123:return b.F12;case 37:return b.Left;case 38:return b.Up;case 39:return b.Right;case 40:return b.Down;case 18:return b.Alt;case 192:return b.Backquote;case 220:return b.Backslash;case 8:return b.Backspace;case 20:return b.CapsLock;
case 188:return b.Comma;case 15:return b.Command;case 17:return b.Control;case 46:return b.Delete;case 35:return b.End;case 13:return b.Enter;case 187:return b.Equals;case 27:return b.Escape;case 36:return b.Home;case 45:return b.Insert;case 219:return b.LeftBracket;case 189:return b.Minus;case 34:return b.PageDown;case 33:return b.PageUp;case 190:return b.Period;case 222:return b.Quote;case 221:return b.RightBracket;case 186:return b.Semicolon;case 16:return b.Shift;case 191:return b.Slash;case 32:return b.Space;
case 9:return b.Tab;case 16777234:return b.Menu;case 16777247:return b.Search}return b.Unknown(a)};qa.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;
case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;
case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;
case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var Z=function(){this._tickables=
[]};Z.__name__=!0;Z.updateEntity=function(a,c){var b=a._compMap.SpeedAdjuster_2;if(null!=b&&(b._realDt=c,c*=b.scale._value,0>=c)){b.onUpdate(c);return}for(b=a.firstComponent;null!=b;){var e=b.next;0==(b._flags&1)&&(b._flags|=1,b.onStart());b.onUpdate(c);b=e}for(b=a.firstChild;null!=b;)e=b.next,Z.updateEntity(b,c),b=e};Z.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var c=0;c<this._tickables.length;){var b=this._tickables[c];null==b||b.update(a)?this._tickables.splice(c,1):++c}i.volume.update(a);
Z.updateEntity(i.root,a)}},render:function(a){var c=a.graphics;null!=c&&(a.willRender(),o.render(i.root,c),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Z};var ob=function(){};ob.__name__=!0;ob.nextPowerOfTwo=function(a){for(var c=1;c<a;)c<<=1;return c};var kb=function(){};kb.__name__=!0;kb.toButton=function(a){switch(a){case 0:return y.Left;case 1:return y.Middle;case 2:return y.Right}return y.Unknown(a)};var Ma=function(){};Ma.__name__=!0;Ma.prototype={__class__:Ma};
var Na=function(){};Na.__name__=!0;Na.prototype={__class__:Na};var Oa=function(a,c){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:c})};Oa.__name__=!0;Oa.__interfaces__=[sa];Oa.prototype={save:function(){this._canvasCtx.save()},transform:function(a,c,b,e,f,j){this._canvasCtx.transform(a,c,b,e,f,j)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,c,b){this.drawSubTexture(a,c,b,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,c,b,e,f,j,d){this._firstDraw?
(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,c,b,e,f,j,d),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+e|0,a.rootY+f|0,j|0,d|0,c|0,b|0,j|0,d|0)},fillRect:function(a,c,b,e,f){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,c,b,e,f),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+F.string(a);
this._canvasCtx.fillStyle="#"+F.string(a);this._canvasCtx.fillRect(c|0,b|0,e|0,f|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var c;switch(a[1]){case 0:c="source-over";break;case 1:c="lighter";break;case 2:c="multiply";break;case 3:c="screen";break;case 4:c="destination-in";break;case 5:c="copy"}this._canvasCtx.globalCompositeOperation=c},applyScissor:function(a,c,b,e){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,c|0,b|0,e|0);this._canvasCtx.clip()},
willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:Oa};var aa=function(a){this.graphics=new Oa(a,!1);this._hasGPU=new A(!0)};aa.__name__=!0;aa.__interfaces__=[ta];aa.prototype={get_type:function(){return I.Canvas},createTextureFromImage:function(a){a=new ua(aa.CANVAS_TEXTURES?k.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},
didRender:function(){this.graphics.didRender()},__class__:aa};var Pa=function(a,c,b){P.call(this,a,c,b)};Pa.__name__=!0;Pa.__super__=P;Pa.prototype=n(P.prototype,{__class__:Pa});var ua=function(a){this._graphics=null;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};ua.__name__=!0;ua.__interfaces__=[Ma];ua.__super__=w;ua.prototype=n(w.prototype,{createTexture:function(a,c){return new Pa(this,a,c)},onDisposed:function(){this._graphics=this.image=null},__class__:ua});var l=function(a,
c){W.call(this,a,c)};l.__name__=!0;l.detectImageFormats=function(a){var c=[g.PNG,g.JPG,g.GIF],b=2,e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&c.unshift(g.WEBP);--b;0==b&&a(c)};e.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f;f=window.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&c.unshift(g.JXR);--b;0==b&&a(c)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
l.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==ia(a,a.canPlayType))return[];var c=new S("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),b=window.navigator.userAgent;if(!m.get_supported()&&c.match(b))return[];for(var c=[{format:g.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:g.MP3,mimeType:"audio/mpeg"},{format:g.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:g.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:g.WAV,mimeType:"audio/wav"}],b=[],
e=0;e<c.length;){var f=c[e];++e;var j="";try{j=a.canPlayType(f.mimeType)}catch(d){}""!=j&&b.push(f.format)}return b};l.supportsBlob=function(){if(l._detectBlobSupport){l._detectBlobSupport=!1;if((new S("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;l._URL=k.loadExtension("URL").value}return null!=l._URL&&null!=l._URL.createObjectURL};
l.__super__=W;l.prototype=n(W.prototype,{loadEntry:function(a,c){var b=this;switch(c.format[1]){case 0:case 1:case 2:case 3:case 4:var e;e=window.document.createElement("img");var f=new ra;f.addDisposingListener(e,"load",function(){l.supportsBlob()&&l._URL.revokeObjectURL(e.src);var a=b._platform.getRenderer().createTextureFromImage(e);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});f.addDisposingListener(e,"error",function(){b.handleError(c,"Failed to load image")});l.supportsBlob()?this.download(a,
c,"blob",function(a){e.src=l._URL.createObjectURL(a)}):e.src=a;break;case 5:case 6:case 7:this.download(a,c,"arraybuffer",function(){var a=b._platform.getRenderer().createCompressedTexture(c.format,null);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});break;case 8:case 9:case 10:case 11:case 12:if(m.get_supported())this.download(a,c,"arraybuffer",function(a){m.ctx.decodeAudioData(a,function(a){b.handleLoad(c,new m(a))},function(){b.handleLoad(c,H.getInstance())})});else{var j;j=window.document.createElement("audio");
j.preload="auto";var d=++l._mediaRefCount;null==l._mediaElements&&(l._mediaElements=new N);l._mediaElements.set(d,j);f=new ra;f.addDisposingListener(j,"canplaythrough",function(){l._mediaElements.remove(d);b.handleLoad(c,new va(j))});f.addDisposingListener(j,"error",function(){l._mediaElements.remove(d);var a=j.error.code;3==a||4==a?b.handleLoad(c,H.getInstance()):b.handleError(c,"Failed to load audio: "+j.error.code)});f.addListener(j,"progress",function(){if(0<j.buffered.length&&0<j.duration){var a=
j.buffered.end(0)/j.duration;b.handleProgress(c,a*c.bytes|0)}});j.src=a;j.load()}break;case 13:this.download(a,c,"text",function(a){b.handleLoad(c,new pa(a))})}},getAssetFormats:function(a){var c=this;null==l._supportedFormats&&(l._supportedFormats=new Ja,l.detectImageFormats(function(a){l._supportedFormats.set_result(c._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(l.detectAudioFormats()).concat([g.Data]))}));l._supportedFormats.get(a)},download:function(a,c,b,e){var f=this,
d=null,g=null,i=0,k=!1,l=function(){k&&(k=!1,window.clearInterval(i))},m=3,n=function(){--m;return 0<=m?(g(),!0):!1},g=function(){l();null!=d&&d.abort();d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType=b;var g=0;d.onprogress=function(a){k||(k=!0,i=window.setInterval(function(){4!=d.readyState&&5E3<Date.now()-g&&!n()&&(l(),f.handleError(c,"Download stalled"))},1E3));g=Date.now();f.handleProgress(c,a.loaded)};d.onerror=function(){if(0!=d.status||!n())l(),f.handleError(c,"HTTP error "+d.status)};
d.onload=function(){var a=d.response;null==a&&(a=d.responseText);l();e(a)};d.send()};g()},__class__:l});var za=function(a,c){E.call(this,a);this._canvas=c};za.__name__=!0;za.__super__=E;za.prototype=n(E.prototype,{__class__:za});var va=function(a){this._disposed=!1;this.audioElement=a};va.__name__=!0;va.__interfaces__=[ga];va.__super__=w;va.prototype=n(w.prototype,{play:function(a){null==a&&(a=1);return new wa(this,a,!1)},loop:function(a){null==a&&(a=1);return new wa(this,a,!0)},onDisposed:function(){this.audioElement=
null},__class__:va});var wa=function(a,c,b){var e=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=b;this._clonedElement.src=a.audioElement.src;this.volume=new v(c,function(){e.updateVolume()});this.updateVolume();this._complete=new A(!1);this.playAudio();i.hidden._value&&this.set_paused(!0)};wa.__name__=!0;wa.__interfaces__=[Na,ha];wa.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():
this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._clonedElement.currentTime},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||
(T.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=i.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=i.hidden.get_changed().connect(function(c){c?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=i.volume._value*this.volume._value},__class__:wa};var pb=function(){};pb.__name__=!0;pb.prototype={__class__:pb};var Y=function(a){var c=this;this._canvas=a;
this.resize=new fa;this.scaleFactor=Y.computeScaleFactor();1!=this.scaleFactor&&(k.setVendorStyle(this._canvas,"transform-origin","top left"),k.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));k.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){k.callLater(ia(c,c.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",ia(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new A(null);null!=
window.orientation&&(window.addEventListener("orientationchange",ia(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new A(!1);k.addVendorListener(window.document,"fullscreenchange",function(){c.updateFullscreen()},!1);this.updateFullscreen()};Y.__name__=!0;Y.__interfaces__=[pb];Y.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var c=window.document.createElement("canvas").getContext("2d"),c=k.loadExtension("backingStorePixelRatio",c).value;
null==c&&(c=1);a/=c;c=window.screen.height;return 1136<a*window.screen.width||1136<a*c?1:a};Y.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,c){var b=this.scaleFactor*a,e=this.scaleFactor*c;if(this._canvas.width==b&&this._canvas.height==e)return!1;this._canvas.width=b|0;this._canvas.height=e|0;
this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,c=window.document.documentElement.style;c.height=window.innerHeight+100+"px";c.width=window.innerWidth+"px";c.overflow="visible";k.callLater(function(){k.hideMobileBrowser();k.callLater(function(){c.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(k.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==k.loadFirstExtension(["fullscreen",
"fullScreen","isFullScreen"],window.document).value)},__class__:Y};var k=function(){};k.__name__=!0;k.callLater=function(a,c){null==c&&(c=0);window.setTimeout(a,c)};k.hideMobileBrowser=function(){window.scrollTo(1,0)};k.loadExtension=function(a,c){null==c&&(c=window);var b=ja.field(c,a);if(null!=b)return{prefix:"",field:a,value:b};for(var b=a.charAt(0).toUpperCase()+t.substr(a,1,null),e=0,f=k.VENDOR_PREFIXES;e<f.length;){var d=f[e];++e;var g=d+b,i=ja.field(c,g);if(null!=i)return{prefix:d,field:g,
value:i}}return{prefix:null,field:null,value:null}};k.loadFirstExtension=function(a,b){for(var h=0;h<a.length;){var e=a[h];++h;e=k.loadExtension(e,b);if(null!=e.field)return e}return{prefix:null,field:null,value:null}};k.polyfill=function(a,b){null==b&&(b=window);var h=k.loadExtension(a,b).value;if(null==h)return!1;b[a]=h;return!0};k.setVendorStyle=function(a,b,h){for(var a=a.style,e=0,f=k.VENDOR_PREFIXES;e<f.length;){var d=f[e];++e;a.setProperty("-"+d+"-"+b,h)}a.setProperty(b,h)};k.addVendorListener=
function(a,b,h,e){for(var f=0,d=k.VENDOR_PREFIXES;f<d.length;){var g=d[f];++f;a.addEventListener(g+b,h,e)}a.addEventListener(b,h,e)};k.orientation=function(a){switch(a){case -90:case 90:return U.Landscape;default:return U.Portrait}};k.createEmptyCanvas=function(a,b){var h;h=window.document.createElement("canvas");h.width=a;h.height=b;return h};k.createCanvas=function(a){var b=k.createEmptyCanvas(a.width,a.height),h=b.getContext("2d");h.save();h.globalCompositeOperation="copy";h.drawImage(a,0,0);h.restore();
return b};k.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var h=a[b];++b;if(0<=h.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};k.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var m=function(a){this._disposed=!1;this.buffer=
a};m.__name__=!0;m.__interfaces__=[ga];m.get_supported=function(){if(m._detectSupport){m._detectSupport=!1;var a=k.loadExtension("AudioContext").value;null!=a&&(m.ctx=new a,m.gain=m.createGain(),m.gain.connect(m.ctx.destination),i.volume.watch(function(a){m.gain.gain.value=a}))}return null!=m.ctx};m.createGain=function(){return null!=m.ctx.createGain?m.ctx.createGain():m.ctx.createGainNode()};m.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};m.__super__=w;m.prototype=n(w.prototype,{play:function(a){null==
a&&(a=1);return new xa(this,a,!1)},loop:function(a){null==a&&(a=1);return new xa(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:m});var xa=function(a,b,h){var e=this;this._sound=a;this._head=m.gain;this._complete=new A(!1);this._sourceNode=m.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=h;this._sourceNode.onended=function(){e._complete.set__(!0)};m.start(this._sourceNode,0);this.playAudio();this.volume=
new v(b,function(a){e.setVolume(a)});1!=b&&this.setVolume(b);i.hidden._value&&this.set_paused(!0)};xa.__name__=!0;xa.__interfaces__=[Na,ha];xa.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(m.ctx.currentTime-this._startedAt)%this._sound.get_duration()},
update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=m.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));
a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=m.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(T.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=i.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:xa};var qb=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=
0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Qa(a);this._drawPatternShader=
new Ra(a);this._fillRectShader=new Sa(a);this.resize(16)};qb.__name__=!0;qb.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);
this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,h,e){e!=this._lastTexture&&(this.flush(),this._lastTexture=e);return this.prepareQuad(5,a,b,h,this._drawTextureShader)},prepareFillRect:function(a,b,h){return this.prepareQuad(6,a,b,h,this._fillRectShader)},prepareQuad:function(a,b,h,e,f){b!=this._lastRenderTarget&&
(this.flush(),this._lastRenderTarget=b);h!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=h);f!=this._lastShader&&(this.flush(),this._lastShader=f);if(null!=e||null!=this._lastScissor)if(null==e||null==this._lastScissor||!this._lastScissor.equals(e))this.flush(),this._lastScissor=null!=e?e.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>
this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?
(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=
this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),h=0;h<a;){var e=h++;b[6*e]=4*e;b[6*e+1]=
4*e+1;b[6*e+2]=4*e+2;b[6*e+3]=4*e+2;b[6*e+4]=4*e+3;b[6*e+5]=4*e}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:qb};var L=function(a,b){this._inverseProjection=this._stateList=null;null==L._scratchQuadArray&&(L._scratchQuadArray=
new Float32Array(8));this._batcher=a;this._renderTarget=b};L.__name__=!0;L.__interfaces__=[sa];L.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Ta,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,h,e,f,d){var g=this._stateList;L._scratchMatrix.set(a,b,h,e,f,d);M.multiply(g.matrix,L._scratchMatrix,g.matrix)},restore:function(){this._stateList=
this._stateList.prev},drawTexture:function(a,b,h){this.drawSubTexture(a,b,h,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,h,e,f,d,g){var i=this._stateList,k=a.root,b=this.transformQuad(b,h,d,g),h=k.width,k=k.height,e=(a.rootX+e)/h,f=(a.rootY+f)/k,d=e+d/h,g=f+g/k,h=i.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,i.blendMode,i.scissor,a),i=this._batcher.data;i[a]=b[0];i[++a]=b[1];i[++a]=e;i[++a]=f;i[++a]=h;i[++a]=b[2];i[++a]=b[3];i[++a]=d;i[++a]=f;i[++a]=h;i[++a]=b[4];
i[++a]=b[5];i[++a]=d;i[++a]=g;i[++a]=h;i[++a]=b[6];i[++a]=b[7];i[++a]=e;i[++a]=g;i[++a]=h},fillRect:function(a,b,h,e,f){var d=this._stateList,b=this.transformQuad(b,h,e,f),h=(a&16711680)/16711680,e=(a&65280)/65280,a=(a&255)/255,f=d.alpha,d=this._batcher.prepareFillRect(this._renderTarget,d.blendMode,d.scissor),g=this._batcher.data;g[d]=b[0];g[++d]=b[1];g[++d]=h;g[++d]=e;g[++d]=a;g[++d]=f;g[++d]=b[2];g[++d]=b[3];g[++d]=h;g[++d]=e;g[++d]=a;g[++d]=f;g[++d]=b[4];g[++d]=b[5];g[++d]=h;g[++d]=e;g[++d]=a;
g[++d]=f;g[++d]=b[6];g[++d]=b[7];g[++d]=h;g[++d]=e;g[++d]=a;g[++d]=f},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,d,e){var f=this._stateList,g=L._scratchQuadArray;g[0]=a;g[1]=b;g[2]=a+d;g[3]=b+e;f.matrix.transformArray(g,4,g);this._inverseProjection.transformArray(g,4,g);a=g[0];b=g[1];d=g[2]-a;e=g[3]-b;0>d&&(a+=d,d=-d);0>e&&(b+=e,e=-e);f.applyScissor(a,b,d,e)},willRender:function(){this._batcher.willRender()},
didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new Ta;var d;d=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*d/b,-1,d);this._inverseProjection=new M;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,d,e){var d=a+d,e=b+e,f=L._scratchQuadArray;f[0]=a;f[1]=b;f[2]=d;f[3]=b;f[4]=d;f[5]=e;f[6]=a;f[7]=e;this._stateList.matrix.transformArray(f,8,f);return f},__class__:L};var Ta=function(){this.scissor=
this.prev=this.next=null;this.matrix=new M;this.alpha=1;this.blendMode=p.Normal};Ta.__name__=!0;Ta.prototype={applyScissor:function(a,b,d,e){if(null!=this.scissor)var f=O.max(this.scissor.x,a),g=O.max(this.scissor.y,b),d=O.min(this.scissor.x+this.scissor.width,a+d),e=O.min(this.scissor.y+this.scissor.height,b+e),a=f,b=g,d=d-f,e=e-g;else this.scissor=new Ia;this.scissor.set(Math.round(a),Math.round(b),Math.round(d),Math.round(e))},__class__:Ta};var Ca=function(a,b){var d=this;this._hasGPU=new A(!0);
this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();d._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){d.init();d._hasGPU.set__(!0)},!1);a.resize.connect(ia(this,this.onResize));this.init()};Ca.__name__=!0;Ca.__interfaces__=[ta];Ca.prototype={get_type:function(){return I.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new X(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,
a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new qb(this.gl);this.graphics=new L(this.batcher,null);this.onResize()},__class__:Ca};var Ua=function(a,b,d){P.call(this,
a,b,d)};Ua.__name__=!0;Ua.__super__=P;Ua.prototype=n(P.prototype,{__class__:Ua});var X=function(a,b,d){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=O.max(2,ob.nextPowerOfTwo(b));this.height=O.max(2,ob.nextPowerOfTwo(d));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};X.__name__=!0;X.__interfaces__=
[Ma];X.drawBorder=function(a,b,d){var e=a.getContext("2d");e.drawImage(a,b-1,0,1,d,b,0,1,d);e.drawImage(a,0,d-1,b,1,0,d,b,1)};X.__super__=w;X.prototype=n(w.prototype,{createTexture:function(a,b){return new Ua(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=k.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);X.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,
0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:X});var C=function(a,b,d){d="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+d;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,C.createShader(a,35633,b));a.attachShader(this._program,C.createShader(a,35632,d));a.linkProgram(this._program);a.useProgram(this._program)};
C.__name__=!0;C.createShader=function(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b};C.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:C};var Ra=function(a){C.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};Ra.__name__=!0;
Ra.__super__=C;Ra.prototype=n(C.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,d,e){this._gl.uniform4f(this.u_region,a,b,d,e)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},
__class__:Ra});var Qa=function(a){C.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};Qa.__name__=!0;Qa.__super__=C;Qa.prototype=n(C.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,
2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Qa});var Sa=function(a){C.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");
this.a_alpha=this.getAttribLocation("a_alpha")};Sa.__name__=!0;Sa.__super__=C;Sa.prototype=n(C.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:Sa});var rb=function(){this._transitor=null};rb.__name__=
!0;rb.__super__=s;rb.prototype=n(s.prototype,{get_name:function(){return"Director_1"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=
a._compMap.Scene_3;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_3;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:rb});var sb=function(){};sb.__name__=!0;sb.__super__=
s;sb.prototype=n(s.prototype,{get_name:function(){return"Scene_3"},__class__:sb});var I={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};I.Stage3D.toString=d;I.Stage3D.__enum__=I;I.WebGL=["WebGL",1];I.WebGL.toString=d;I.WebGL.__enum__=I;I.Canvas=["Canvas",2];I.Canvas.toString=d;I.Canvas.__enum__=I;var Bb=function(){};Bb.__name__=!0;Bb.that=function(){};var Ja=function(){this.success=new q;this.error=new q;this.progressChanged=new fa;this.hasResult=!1;this._total=this._progress=
0};Ja.__name__=!0;Ja.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Ja};var fa=function(a){u.call(this,
a)};fa.__name__=!0;fa.__super__=u;fa.prototype=n(u.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==u.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:fa});var $a=function(a){this.next=null;this.fn=a};$a.__name__=!0;$a.prototype={__class__:$a};var B=function(){};B.__name__=
!0;B.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?t.substr(a,b+1,null):null};B.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?t.substr(a,0,b):a};B.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=t.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=t.substr(a,b+1,null));return B.getFileExtension(a)};B.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};B.withFields=function(a,b){var d=b.length;if(0<d){for(var a=0<a.length?
a+" [":a+"[",e=0;e<d;){0<e&&(a+=", ");var f=b[e],g=b[e+1];if(F.is(g,Error)){var i=g.stack;null!=i&&(g=i)}a+=f+"="+F.string(g);e+=2}a+="]"}return a};var tb=function(a,b,d,e){null==e&&(e=!1);null==d&&(d=!1);this.last_position=-1;this.looping=this.playing=!1;this.lerp_amt=0.1;this.volume=0;this.sound=b;this.name=a;this.type="SOUND";r.debug&&null;d?this.current_playback=this.sound.play():e&&(this.current_playback=this.sound.loop())};tb.__name__=!0;tb.prototype={update:function(){null!=this.current_playback?
(r.debug&&null,this.current_playback.volume.animateTo(this.volume,this.lerp_amt),this.current_playback.get_complete().get__()&&(this.current_playback=null),this.current_playback.get_position()<this.last_position&&this.looping&&r.debug&&null,this.last_position=this.current_playback.get_position(),r.debug&&null):this.looping=this.playing=!1},Loop:function(a){null==a&&(a=1);null==this.current_playback&&(this.volume=a,this.current_playback=this.sound.loop())},__class__:tb};var r=function(a,b){s.call(this);
this.files_by_label=b;null==this.files_by_label&&(this.files_by_label=new D);this.assets=a;this.audio_by_label=new D;this.load_files(a);r.debug&&null};r.__name__=!0;r.GetInstance=function(){if(null==r.Instance)throw"Instance not initialized with Asset Pack. Unable to load content. Please initialize in the Main#OnSuccess Method";return r.Instance};r.CreateInstance=function(a,b){if(null==r.Instance&&null!=a&&null!=b)return r.Instance=new r(a,b),r.Instance;if(null!=r.Instance)throw"Only one instance of AudioManager may exist at a time!";
if(null==a)throw"Assets not given to AudioManager; Unable to load audio assets.";throw"No expected files passed to AudioManager.\nUnable to Initialize.\nIf you want to initialize without having initial files,\nplease pass in an empty array";};r.__super__=s;r.prototype=n(s.prototype,{get_name:function(){return"AudioManager_5"},onUpdate:function(){for(var a=this.audio_by_label.keys();a.hasNext();)this.audio_by_label.get(a.next()).update();for(a=this.SongManagers.keys();a.hasNext();)this.SongManagers.get(a.next()).update()},
load_files:function(a){for(var b=this.files_by_label.keys();b.hasNext();){var d=b.next();r.debug&&null;var e=this.files_by_label.get(d),e=a.getSound(e);this.audio_by_label.set(d,new tb(d,e,!1,null,0))}this.files_by_label=new D},Loop:function(a,b){null==b&&(b=1);this.audio_by_label.get(a).Loop(b)},__class__:r});var Va=function(){};Va.__name__=!0;Va.main=function(){i.init();var a=new ca(2105376,i._platform.getStage().get_width(),i._platform.getStage().get_height());i.root.addChild((new R).add(a));a=
G.fromAssets("global");i._platform.loadAssetPack(a).get(Va.onSuccess);i.root.addChild((new R).add(new ca(2707565,i._platform.getStage().get_width(),i._platform.getStage().get_height())))};Va.onSuccess=function(a){var b=new ca(2105376,i._platform.getStage().get_width(),i._platform.getStage().get_height());i.root.addChild((new R).add(b));new da(a,"Arial");b=a.getTexture("Hero").split(8,3);b=(new R).add((new na(b[0])).setXY(i._platform.getStage().get_width()/2,i._platform.getStage().get_height()/2)).add(new Wa({walkingBack:b.slice(0,
4),walkingFront:b.slice(4,8),walkingLeft:b.slice(8,12),walkingRight:b.slice(12,16),attackingLeft:b.slice(16,18),attackingRight:b.slice(18,20),attackingBack:b.slice(20,22),attackingFront:b.slice(22,24)}));i.root.addChild(b);var d=new D,d=new D;d.set("bgm","deep_leaves/deep_leaves");b._compMap.Player_4.audio=r.CreateInstance(a,d);a=(new R).add(r.GetInstance());i.root.addChild(a);a._compMap.AudioManager_5.Loop("bgm",0.7);null};var Wa=function(a){this.vX=this.vY=0;this.SLOW_DOWN_SPEED=0.95;var b=this;
s.call(this);this._spriteStates=a;this._currentIndex=0;this._currentStateArray=a.walkingFront;this._spriteChangeTimer=new v(0,function(a,e){a<e&&(++b._currentIndex,b._currentIndex%=b._currentStateArray.length)});this._spriteChangeTimer.set_behavior(new Xa(this._spriteChangeTimer))};Wa.__name__=!0;Wa.__super__=s;Wa.prototype=n(s.prototype,{get_name:function(){return"Player_4"},onUpdate:function(a){var c=F.instance(this.owner._compMap.Sprite_0,na);c.texture=this._currentStateArray[this._currentIndex];
this._spriteChangeTimer.update(a);i._platform.getPointer().get_x();i._platform.getPointer().get_y();a=0.5+0.2*c.y._value/i._platform.getStage().get_height();this.vY*=this.SLOW_DOWN_SPEED;this.vX*=this.SLOW_DOWN_SPEED;var d=!1;i._platform.getKeyboard().isDown(b.Up)&&(d=!0,this.vY+=-1);i._platform.getKeyboard().isDown(b.Down)&&(d=!0,this.vY+=1);i._platform.getKeyboard().isDown(b.Left)&&(d=!0,this.vX+=-1);i._platform.getKeyboard().isDown(b.Right)&&(d=!0,this.vX+=1);c.x.animateBy(this.vX,0.05);c.y.animateBy(this.vY,
0.05);d&&this.setAnimationSprites();c.x._value+c.getNaturalWidth()>i._platform.getStage().get_width()-3?(c.x.animateTo(i._platform.getStage().get_width()-5-c.getNaturalWidth(),0.01),this.vX=0):3>c.x._value?(c.x.animateTo(5,0.01),this.vX=0):c.y._value+c.getNaturalHeight()>i._platform.getStage().get_height()-3?(c.y.animateTo(i._platform.getStage().get_height()-5-c.getNaturalHeight(),0.01),this.vY=0):3>c.y._value&&(c.y.animateTo(5,0.01),this.vY=0);c.scaleY.animateTo(2*a*O.sign(c.scaleX._value),0.1)},
setAnimationSprites:function(){1<Math.abs(this.vX)&&Math.abs(this.vX)>Math.abs(this.vY)?this._currentStateArray=0<this.vX?this._spriteStates.walkingRight:this._spriteStates.walkingLeft:0<this.vY?this._currentStateArray=this._spriteStates.walkingFront:0>this.vY&&(this._currentStateArray=this._spriteStates.walkingBack)},__class__:Wa});var ub=function(){};ub.__name__=!0;ub.__super__=s;ub.prototype=n(s.prototype,{get_name:function(){return"SongManager_6"},update:function(){},__class__:ub});var Xa=function(a){this._spriteChangeTimer=
a};Xa.__name__=!0;Xa.__interfaces__=[Da];Xa.prototype={update:function(a){a=this._spriteChangeTimer._value+a;return 0.5<a?a-0.5:a},isComplete:function(){return!1},__class__:Xa};var N=function(){this.h={}};N.__name__=!0;N.__interfaces__=[wb];N.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:N};var D=function(){this.h={}};D.__name__=
!0;D.__interfaces__=[wb];D.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return t.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:D};var Ab=function(){};Ab.__name__=!0;Ab.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var z=function(){};
z.__name__=!0;z.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};z.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",e=2,f=a.length;e<f;)var g=e++,d=2!=g?d+(","+z.__string_rec(a[g],b)):d+z.__string_rec(a[g],b);return d+")"}d=a.length;e="[";b+="\t";for(f=
0;f<d;)g=f++,e+=(0<g?",":"")+z.__string_rec(a[g],b);return e+"]"}try{e=a.toString}catch(i){return"???"}if(null!=e&&e!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;d=null;e="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=e.length&&(e+=", \n"),e+=b+d+" : "+z.__string_rec(a[d],b));b=b.substring(1);return e+("\n"+b+"}");case "function":return"<function>";case "string":return a;
default:return""+a}};z.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var e=0,f=d.length;e<f;){var g=e++,g=d[g];if(g==b||z.__interfLoop(g,b))return!0}return z.__interfLoop(a.__super__,b)};z.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Ib:return(a|0)===a;case Fb:return"number"==typeof a;case Gb:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Jb:return!0;
default:if(null!=a){if("function"==typeof b&&(a instanceof b||z.__interfLoop(z.getClass(a),b)))return!0}else return!1;return b==Kb&&null!=a.__name__||b==Lb&&null!=a.__ename__?!0:a.__enum__==b}};var yb=function(){};yb.__name__=!0;yb.getContextWebGL=function(a,b){for(var d=0,e=["webgl","experimental-webgl"];d<e.length;){var f=e[d];++d;f=a.getContext(f,b);if(null!=f)return f}return null};var Hb=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;
Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Ib={__name__:["Int"]},Jb={__name__:["Dynamic"]},Fb=Number;Fb.__name__=["Float"];var Gb=Boolean;Gb.__ename__=["Bool"];var Kb={__name__:["Class"]},Lb={};T.instance=new T;u.DISPATCHING_SENTINEL=new ba(null,null);i.root=new R;i.uncaughtError=new q;i.hidden=new A(!1);i.volume=new v(1);i._platform=
T.instance;i._calledInit=!1;G.__meta__={obj:{assets:[{global:[{bytes:744,md5:"abe48661625426bc379b115b1b1c163f",name:"Arial.bmfc"},{bytes:62192,md5:"9930a8f5a08449425942bedb9e7befbd",name:"Arial.fnt"},{bytes:73484,md5:"6cf73fdfb5cfab748e6be8ad116898ca",name:"Arial_0.png"},{bytes:50156,md5:"ff09074903482600cb59b570b2f096a1",name:"CherryCreamSoda.ttf"},{bytes:2629713,md5:"f7188d4d4900d9bac7a840f72d9702cd",name:"deep_leaves/deep_leaves.m4a"},{bytes:1707862,md5:"bbfea731439f0ab6d0454953eeb52fda",name:"deep_leaves/deep_leaves.mp3"},
{bytes:1613503,md5:"b6dff50ed992f47546881c874e08bc03",name:"deep_leaves/deep_leaves.ogg"},{bytes:1579,md5:"25cc8f2327c14562829cbc92c477eb9f",name:"Hero.png"},{bytes:24621,md5:"c47b1e703aa3201cecf5a31fe0290e7f",name:"REMOVE.fnt"},{bytes:95291,md5:"3334e3db95fc8227481a3b877ade8c04",name:"REMOVE.png"}]}]}};G._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();o._scratchPoint=new cb;da.NEWLINE=
new Ga(10);J._sharedEvent=new fb;E._sharedEvent=new gb;x._sharedEvent=new hb;aa.CANVAS_TEXTURES=(new S("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);l._mediaRefCount=0;l._detectBlobSupport=!0;k.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];k.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new S("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);m._detectSupport=!0;L._scratchMatrix=new M;r.debug=!0;Va.main()})();
